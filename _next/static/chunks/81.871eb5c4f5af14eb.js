(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{2427:()=>{},9081:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>en});var r=a(5155),n=a(2115),o=a(833),s=a(5402),i=a(3710),c=a(8741);a(8413);var l=a(6756),d=a(9579),u=a(4918),h=a(1983),m=a(6331),p=a(6017),g=a(2091),x=a(5436),v=a(9561),j=a(894),f=a(2241),A=a(152),b=a(1441),y=a(391),w=a(1118),N=a(4286),k=a(4244),C=a(1837),D=a(8205),L=a(2678),P=a(507),S=a(6765),E=a(1888);function I(e){let{categories:t=[],onSelectCategory:a,selectedCategory:o}=e,[s,i]=(0,n.useState)(!1);console.log("ProjectDropdown received categories:",t),console.log("ProjectDropdown selectedCategory:",o);let c=e=>{console.log("ProjectDropdown handleClose called with category:",e),i(!1),a(e)};return(0,r.jsx)(x.A,{sx:{minWidth:120},children:(0,r.jsxs)(L.A,{fullWidth:!0,children:[(0,r.jsx)(P.A,{id:"category-select-label",children:"Category"}),(0,r.jsxs)(S.A,{labelId:"category-select-label",id:"category-select",open:s,onClose:()=>i(!1),onOpen:()=>i(!0),value:o||"",label:"Category",children:[(0,r.jsx)(E.A,{onClick:()=>c(""),children:"All Projects"},"all"),t.map((e,t)=>(0,r.jsx)(E.A,{onClick:()=>c(e.Value||e.value),children:e.Label||e.label||e.Value||e.value},e.Value||e.value||"category-".concat(t)))]})]})})}var F=a(9388);function U(e){let{filteredProjects:t,onSelectCategory:a,selectedCategory:o,markerRefs:s,categories:i=[]}=e,[c,L]=(0,n.useState)(!1),[P,S]=(0,n.useState)(""),E=()=>L(!c),[U,T]=(0,n.useState)(!0),W=(0,l.ko)(),{isDarkMode:O,toggleDarkMode:R}=(0,F.D)();(0,n.useEffect)(()=>{document.body.classList.toggle("dark-mode",O)},[O]),console.log("Filtered Projects:",t),console.log("Selected Category:",o);let z=null==t?void 0:t.filter(e=>{var t,a,r;let n=P.toLowerCase();return(null===(t=e.Name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.DescriptionShort)||void 0===a?void 0:a.toLowerCase().includes(n))||(null===(r=e.Description)||void 0===r?void 0:r.toLowerCase().includes(n))}),M=e=>{let a=parseFloat(e.Latitude),r=parseFloat(e.Longitude);console.log("Navigating to:",a,r);let n=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),o="".concat(e.Name,"-").concat(n);isNaN(a)||isNaN(r)?console.error("Invalid coordinates:",a,r):(null==s?void 0:s.current[o])?(W.flyTo([a,r],13,{animate:!0}),s.current[o].openPopup()):console.warn('Marker for key "'.concat(o,'" not found.'))};return(0,r.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,r.jsx)(d.Ay,{variant:"permanent",anchor:U?"left":"right",sx:{width:60,flexShrink:0,"& .MuiDrawer-paper":{width:60,boxSizing:"border-box",backgroundColor:O?"#1a1a1a":"#ffffff",color:O?"#ffffff":"#000000",transition:"background-color 0.3s, color 0.3s"}},children:(0,r.jsxs)(u.A,{children:[(0,r.jsx)(h.Ay,{disablePadding:!0,children:(0,r.jsx)(m.A,{title:"Menu",placement:"right",children:(0,r.jsx)(p.A,{sx:{justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",top:"-10px",left:"-10px",right:"-10px",bottom:"-10px",background:c?"none":"radial-gradient(circle, rgba(255,0,0,0.3) 0%, rgba(255,255,0,0.2) 30%, rgba(0,255,255,0.1) 60%, transparent 100%)",borderRadius:"50%",animation:c?"none":"outer-pulse 4s ease-in-out infinite",zIndex:-1},"&:hover":{"& .MuiSvgIcon-root":{filter:"drop-shadow(0 0 20px rgba(0, 255, 26, 1)) drop-shadow(0 0 35px rgba(0, 255, 26, 0.9)) drop-shadow(0 0 50px rgba(0, 255, 26, 0.6))",transition:"all 0.3s ease",transform:"scale(1.2)"},"&::before":{background:"radial-gradient(circle, rgba(0,255,26,0.4) 0%, rgba(0,255,26,0.3) 30%, rgba(0,255,26,0.1) 60%, transparent 100%)",animation:"hover-pulse 4s ease-in-out infinite"}},"& .MuiSvgIcon-root":{filter:c?"drop-shadow(0 0 5px rgba(255,255,255,0.8))":"drop-shadow(0 0 8px rgb(255, 0, 0)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4))",transition:"all 4.3s ease",animation:c?"none":"intense-pulse-glow 4.5s ease-in-out infinite",transformOrigin:"center"}},onClick:E,children:(0,r.jsx)(g.A,{sx:{minWidth:"auto"},children:(0,r.jsx)(w.A,{})})})})}),(0,r.jsx)(h.Ay,{disablePadding:!0,children:(0,r.jsx)(m.A,{title:"Toggle Dark Mode",placement:"right",children:(0,r.jsx)(p.A,{sx:{justifyContent:"center"},onClick:R,children:(0,r.jsx)(g.A,{sx:{minWidth:"auto"},children:(0,r.jsx)(N.A,{})})})})}),(0,r.jsx)(h.Ay,{disablePadding:!0,children:(0,r.jsx)(m.A,{title:"Toggle Sidebar Position",placement:"right",children:(0,r.jsx)(p.A,{sx:{justifyContent:"center"},onClick:()=>T(!U),children:(0,r.jsx)(g.A,{sx:{minWidth:"auto"},children:(0,r.jsx)(k.A,{})})})})})]})}),(0,r.jsxs)(d.Ay,{anchor:U?"left":"right",open:c,onClose:E,variant:"temporary",PaperProps:{sx:{width:300,backgroundColor:O?"#1a1a1a":"#ffffff",color:O?"#ffffff":"#000000",transition:"background-color 0.3s, color 0.3s"}},children:[(0,r.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",p:1},children:[(0,r.jsx)(v.A,{variant:"h6",children:"Projects"}),(0,r.jsx)(j.A,{onClick:E,children:(0,r.jsx)(C.A,{})})]}),(0,r.jsx)(f.A,{}),(0,r.jsx)(x.A,{sx:{p:2},children:(0,r.jsx)(A.A,{fullWidth:!0,variant:"outlined",placeholder:"Search projects...",value:P,onChange:e=>{S(e.target.value)},InputProps:{startAdornment:(0,r.jsx)(b.A,{position:"start",children:(0,r.jsx)(D.A,{})})}})}),(0,r.jsx)(x.A,{sx:{p:2},children:(0,r.jsx)(I,{onSelectCategory:a,selectedCategory:o,categories:i})}),(0,r.jsx)(u.A,{children:null==z?void 0:z.map(e=>{let a=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),n="".concat(e.Name,"-").concat(a,"-").concat(e.Latitude,"-").concat(e.Longitude);return(0,r.jsx)(h.Ay,{disablePadding:!0,children:(0,r.jsx)(p.A,{onClick:()=>M(e),children:(0,r.jsx)(y.A,{primary:e.Name,secondary:e.DescriptionShort})})},n)})})]})]})}a(9465);var T=a(8562),W=a(2282),O=a(6228),R=a(8648),z=a(9987),M=a(1291),_=a(2277),B=a(6214),H=a(9241),V=a(9896),q=a(7456),Y=a(6167),Z=a(415),G=a(1417),J=a(8749);a(2427);let K=e=>{var t,a,o,s;let{open:i,onClose:c,project:l}=e,{isDarkMode:d}=(0,F.D)(),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[g,j]=(0,n.useState)(0),[f,A]=(0,n.useState)([]),[b,y]=(0,n.useState)(0),w=(0,n.useRef)(null);if((0,n.useEffect)(()=>{if(!l)return;let e=[];l.ImageUrl&&e.push({src:l.ImageUrl,title:l.Name,type:"project"}),l.Artworks&&l.Artworks.length>0&&l.Artworks.forEach((t,a)=>{t.ImageUrl&&e.push({src:t.ImageUrl,title:t.Title,type:"artwork",description:t.Description})}),A(e)},[l]),(0,n.useEffect)(()=>{let e=()=>{w.current&&h(w.current.scrollTop>50)},t=w.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[]),(0,n.useEffect)(()=>{let e=e=>{m&&("Escape"===e.key&&k(),"ArrowRight"===e.key&&C(),"ArrowLeft"===e.key&&D())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[m]),(0,n.useEffect)(()=>{i&&y(0)},[i]),!l)return null;let N=e=>{j(e),p(!0)},k=()=>{p(!1)},C=()=>{j(e=>(e+1)%f.length)},D=()=>{j(e=>(e-1+f.length)%f.length)},L=[{label:"Overview",icon:V.A,content:"overview"},...l.HasArtwork&&(null===(t=l.Artworks)||void 0===t?void 0:t.length)>0?[{label:"Artworks",icon:q.A,content:"artworks",count:l.Artworks.length}]:[],...l.HasPoems&&(null===(a=l.Poems)||void 0===a?void 0:a.length)>0?[{label:"Poems",icon:Y.A,content:"poems",count:l.Poems.length}]:[],...(null===(o=l.Activities)||void 0===o?void 0:o.length)>0?[{label:"Activities",icon:Z.A,content:"activities",count:l.Activities.length}]:[],...(null===(s=l.relatedUrls)||void 0===s?void 0:s.length)>0?[{label:"Links",icon:G.A,content:"links",count:l.relatedUrls.length}]:[]],P=()=>(0,r.jsx)("div",{className:"tab-content",children:(0,r.jsxs)(H.A,{container:!0,spacing:3,children:[(l.DescriptionLong||l.DescriptionShort)&&(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"info-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCDD Description"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.DescriptionLong||l.DescriptionShort})]})}),l.Background&&(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"info-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFAF Background"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.Background})]})}),l.Education&&l.Education.length>0&&(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"info-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83C\uDF93 Education"}),(0,r.jsx)("div",{className:"education-list",children:l.Education.map((e,t)=>(0,r.jsx)(v.A,{variant:"body1",className:"education-item",children:e},t))})]})}),(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(H.A,{container:!0,spacing:2,children:[l.Affiliation&&(0,r.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,r.jsxs)(T.A,{className:"info-card compact",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFE2 Affiliation"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.Affiliation})]})}),l.College&&(0,r.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,r.jsxs)(T.A,{className:"info-card compact",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFDBÔ∏è College"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.College})]})}),l.Department&&(0,r.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,r.jsxs)(T.A,{className:"info-card compact",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCDA Department"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.Department})]})}),l.Year&&(0,r.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,r.jsxs)(T.A,{className:"info-card compact",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCC5 Year"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.Year})]})})]})}),l.Location&&(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"info-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCCD Location"}),(0,r.jsx)(v.A,{variant:"body1",className:"card-content",children:l.Location})]})}),l.Outcome&&l.Outcome.Type&&(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"outcome-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFAF Outcome"}),(0,r.jsx)(v.A,{variant:"h6",className:"outcome-title",children:l.Outcome.Title}),(0,r.jsx)(v.A,{variant:"body1",className:"outcome-summary",children:l.Outcome.Summary}),l.Outcome.Link&&(0,r.jsx)(W.A,{variant:"contained",color:"primary",href:l.Outcome.Link,target:"_blank",rel:"noopener noreferrer",className:"outcome-button",children:"View Outcome"})]})})]})}),S=()=>{var e;return(0,r.jsx)("div",{className:"tab-content",children:(0,r.jsx)("div",{className:"artwork-gallery",children:null===(e=l.Artworks)||void 0===e?void 0:e.map((e,t)=>(0,r.jsxs)(T.A,{className:"artwork-card",onClick:()=>{let a=f.findIndex(t=>t.src===e.ImageUrl);console.log("card clicked",e.ImageUrl,a,f),-1===a&&(a=t+(l.ImageUrl?1:0)),N(a)},children:[e.ImageUrl&&(0,r.jsxs)("div",{className:"artwork-image-container",children:[(0,r.jsx)("img",{src:e.ImageUrl,alt:e.Title,className:"artwork-image"}),(0,r.jsx)("div",{className:"artwork-image-overlay",children:(0,r.jsx)(J.A,{})})]}),(0,r.jsxs)("div",{className:"artwork-content",children:[(0,r.jsx)(v.A,{variant:"h6",className:"artwork-title",children:e.Title}),(0,r.jsx)(v.A,{variant:"body2",className:"artwork-description",children:e.Description})]})]},t))})})},E=()=>{var e;return(0,r.jsx)("div",{className:"tab-content",children:(0,r.jsx)(H.A,{container:!0,spacing:3,children:null===(e=l.Poems)||void 0===e?void 0:e.map((e,t)=>(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"poem-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"poem-title",children:e.Title}),(0,r.jsx)(v.A,{variant:"body1",className:"poem-content",children:e.Content}),e.Author&&(0,r.jsxs)(v.A,{variant:"subtitle2",className:"poem-author",children:["- ",e.Author]})]})},t))})})},I=()=>{var e;return(0,r.jsx)("div",{className:"tab-content",children:(0,r.jsx)(H.A,{container:!0,spacing:3,children:null===(e=l.Activities)||void 0===e?void 0:e.map((e,t)=>(0,r.jsx)(H.A,{xs:12,children:(0,r.jsxs)(T.A,{className:"activity-card",children:[(0,r.jsx)(v.A,{variant:"h6",className:"activity-title",children:e.Title}),(0,r.jsx)(v.A,{variant:"body1",className:"activity-description",children:e.Description}),e.Date&&(0,r.jsxs)(v.A,{variant:"caption",className:"activity-date",children:["\uD83D\uDCC5 ",e.Date]}),e.Link&&(0,r.jsx)(W.A,{variant:"text",color:"primary",href:e.Link,target:"_blank",rel:"noopener noreferrer",className:"activity-link",children:"Learn More"})]})},t))})})},U=()=>{var e;return(0,r.jsx)("div",{className:"tab-content",children:(0,r.jsx)(H.A,{container:!0,spacing:2,children:null===(e=l.relatedUrls)||void 0===e?void 0:e.map((e,t)=>(0,r.jsx)(H.A,{xs:12,sm:6,children:(0,r.jsx)(W.A,{href:e.url,target:"_blank",rel:"noopener noreferrer",variant:"outlined",fullWidth:!0,className:"related-link-button",startIcon:(0,r.jsx)(G.A,{}),children:e.title})},t))})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(O.A,{open:i,onClose:c,maxWidth:"lg",fullWidth:!0,className:"project-modal ".concat(d?"dark-mode":""),slotProps:{backdrop:{sx:{backgroundColor:d?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(15px) saturate(1.5)",WebkitBackdropFilter:"blur(15px) saturate(1.5)"}}},children:[(0,r.jsxs)(x.A,{className:"modal-header-visual ".concat(u?"collapsed":""),children:[l.ImageUrl&&(0,r.jsx)("img",{src:l.ImageUrl,alt:l.Name,className:"project-image-header"}),(0,r.jsxs)(x.A,{className:"modal-title-overlay",children:[(0,r.jsx)(v.A,{variant:"h4",component:"h2",className:"modal-title-h2",children:l.Name}),l.FacultyFellow&&(0,r.jsxs)(v.A,{variant:"subtitle1",className:"faculty-fellow",children:["By ",l.FacultyFellow]})]})]}),(0,r.jsx)(x.A,{className:"modal-tabs-container",children:(0,r.jsx)(R.A,{value:b,onChange:(e,t)=>{y(t)},variant:"scrollable",scrollButtons:"auto",className:"modal-tabs",children:L.map((e,t)=>{let a=e.icon;return(0,r.jsx)(z.A,{icon:(0,r.jsx)(a,{}),label:e.count?(0,r.jsx)(M.A,{badgeContent:e.count,color:"primary",children:e.label}):e.label,className:"modal-tab"},t)})})}),(0,r.jsx)(_.A,{className:"modal-content",ref:w,children:(()=>{let e=L[b];if(!e)return null;switch(e.content){case"overview":default:return P();case"artworks":return S();case"poems":return E();case"activities":return I();case"links":return U()}})()}),(0,r.jsx)(B.A,{className:"modal-actions",children:(0,r.jsx)(W.A,{onClick:c,variant:"contained",className:"close-button",children:"Close"})})]}),m&&f.length>0&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:k,children:(0,r.jsxs)("div",{style:{position:"relative",zIndex:2,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("img",{src:f[g].src,alt:f[g].title,style:{maxWidth:"90vw",maxHeight:"70vh",borderRadius:8,background:"#fff",marginBottom:12}}),f[g].description&&(0,r.jsx)("div",{style:{color:"#e5e7eb",marginTop:4,fontSize:14,fontWeight:400,maxWidth:"60vw",marginLeft:"auto",marginRight:"auto",whiteSpace:"pre-line",opacity:.85,textAlign:"center"},children:f[g].description}),(0,r.jsx)("button",{style:{position:"absolute",top:10,right:10,zIndex:3},onClick:k,children:"Close"})]})})]})};var Q=a(2127),X=a(1858);function $(){let e=(0,l.ko)();return(0,n.useEffect)(()=>{(async()=>{let t=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready.json"),a=(await t.json()).map(e=>[parseFloat(e.Latitude),parseFloat(e.Longitude)]).filter(e=>{let[t,a]=e;return!isNaN(t)&&!isNaN(a)}),r=X.Ltv(e.getPanes().overlayPane).append("svg").attr("class","d3-path-overlay").style("pointer-events","none"),n=r.append("g").attr("class","d3-path-group"),o=t=>{let[a,r]=t,n=e.latLngToLayerPoint([a,r]);return[n.x,n.y]},s=()=>{let t=e.getBounds(),s=e.latLngToLayerPoint(t.getNorthWest()),i=e.latLngToLayerPoint(t.getSouthEast());r.attr("width",i.x-s.x).attr("height",i.y-s.y).style("left","".concat(s.x,"px")).style("top","".concat(s.y,"px")),n.attr("transform","translate(".concat(-s.x,",").concat(-s.y,")"));let c=a.map(o),l=X.n8j().x(e=>e[0]).y(e=>e[1]).curve(X.qrM),d=n.selectAll("path.project-path").data([c]);d.enter().append("path").attr("class","project-path").merge(d).attr("d",l).attr("fill","none").attr("stroke","#ff00cc").attr("stroke-width",6).attr("stroke-linecap","round").attr("stroke-linejoin","round").style("filter","drop-shadow(0 0 12px #ff00cc)"),d.exit().remove()};return e.on("viewreset moveend zoomend",s),s(),()=>{r.remove(),e.off("viewreset moveend zoomend",s)}})()},[e]),null}var ee=a(6046);let et=[32.2217,-110.9265],ea=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color: #e74c3c; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[12,12],iconAnchor:[6,6],popupAnchor:[0,-5]}),er=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color:rgb(0, 255, 247); width: 16px; height: 16px; border-radius: 50%; border: 3px solid blue; box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);"></div>',iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-5]});function en(){let{projects:e,filteredProjects:t,filterProjects:a,categories:c}=function(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)([]),[o,s]=(0,n.useState)([]),[i,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();t(a),r(a);let n=[...new Set(a.map(e=>e.ProjectCategory).filter(Boolean))];console.log("Found categories in data:",n);let o={ArtExhibition:"Art Exhibition",Research:"Research",CommunityEngagement:"Community Engagement",Performance:"Performance",Workshop:"Workshop",Conference:"Conference",Publication:"Publication",Other:"Other"},i=n.map(e=>({Value:e,Label:o[e]||e}));console.log("Processed categories:",i),s(i)}catch(e){console.error("Error fetching data:",e),c(e.message)}})()},[]),{projects:e,filteredProjects:a,categories:o,error:i,filterProjects:t=>{if(console.log("Filtering by category:",t),!t){r(e);return}let a=e.filter(e=>{let a=e.ProjectCategory===t;return console.log("Project ".concat(e.Name,": ProjectCategory=").concat(e.ProjectCategory,", matches=").concat(a)),a});console.log("Filtered ".concat(a.length," projects out of ").concat(e.length," total")),r(a)},getProjectsWithArtworks:()=>e.filter(e=>e.Artworks&&e.Artworks.length>0),getProjectsWithPoems:()=>e.filter(e=>e.Poems&&e.Poems.length>0),getUniqueActivities:()=>{let t=new Set;return e.forEach(e=>{e.Activities&&e.Activities.forEach(e=>{t.add(e)})}),Array.from(t)}}}(),[l,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),g=(0,n.useRef)({});(0,n.useRef)(null);let[x,v]=(0,n.useState)(null),{isDarkMode:j}=(0,F.D)(),f=(0,ee.useSearchParams)(),A=(0,ee.useRouter)(),b=e=>{h(e),p(!0);let t=new URLSearchParams(f);t.set("project",e.Name),t.set("lat",e.Latitude),t.set("lng",e.Longitude),A.push("".concat(window.location.pathname,"?").concat(t.toString()))},y=(e,t,a)=>{Object.values(g.current).forEach(e=>{e&&e.setIcon(ea)}),e.setIcon(er),v(e);let r=new URLSearchParams(f);r.set("selected",t.Name),A.replace("".concat(window.location.pathname,"?").concat(r.toString()))};return(0,n.useEffect)(()=>{let e=f.get("project"),r=f.get("category"),n=f.get("selected");if(r&&(d(r),a(r)),e&&t){let a=t.find(t=>t.Name===e);a&&(h(a),p(!0))}if(n&&t){let e=t.find(e=>e.Name===n);if(e){let a=t.indexOf(e),r="".concat(e.Name,"-").concat(a),n=g.current[r];n&&(n.setIcon(er),v(n))}}},[f,t]),(0,n.useEffect)(()=>{let e=()=>{};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]),(0,n.useEffect)(()=>{t&&t.forEach((e,t)=>{let a="".concat(e.Name,"-").concat(t),r=g.current[a];if(r){let a=document.createElement("div");a.className="responsive-popup-content",a.innerHTML='\n            <img \n              src="'.concat(e.ImageUrl||"https://via.placeholder.com/150",'" \n              alt="').concat(e.Name,'" \n              class="popup-image" \n            />\n            <strong class="popup-title">').concat(e.Name,'</strong>\n            <p class="popup-description">').concat(e.DescriptionShort||e.Description||"",'</p>\n            <button id="more-details-').concat(t,'" class="popup-button">\n              More Details\n            </button>\n        ');let n=Q.L({hasTip:!1,autoPan:!0,className:j?"dark-mode-popup":"light-mode-popup"}).setContent(a);r.bindPopup(n),r.on("click",()=>{y(r,e,t)}),r.on("popupopen",()=>{y(r,e,t)}),r.on("popupclose",()=>{r.setIcon(ea),v(null);let e=new URLSearchParams(f);e.delete("selected"),A.replace("".concat(window.location.pathname,"?").concat(e.toString()))});let o=a.querySelector("#more-details-".concat(t));o&&o.addEventListener("click",()=>{b(e)})}})},[t,j,f]),(0,r.jsxs)("div",{className:"map-container",style:{position:"relative",height:"100vh",width:"100%"},children:[(0,r.jsxs)(o.W,{center:et,zoom:11,style:{height:"100vh",width:"100%"},children:[(0,r.jsx)(s.e,{url:j?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',minZoom:0,maxZoom:20}),null==t?void 0:t.map((e,t)=>{let a="".concat(e.Name,"-").concat(t);return(0,r.jsx)(i.p,{position:[e.Latitude,e.Longitude],icon:ea,ref:e=>{e&&(g.current[a]=e)}},a)}),(0,r.jsx)(U,{filteredProjects:t,onSelectCategory:e=>{console.log("Map component received category selection:",e),d(e),a(e);let t=new URLSearchParams(f);e?t.set("category",e):t.delete("category"),A.replace("".concat(window.location.pathname,"?").concat(t.toString()))},selectedCategory:l,markerRefs:g,categories:c}),(0,r.jsx)($,{})]}),(0,r.jsx)("div",{className:"map-color-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%",background:"rgba(192, 128, 248, 0.1)",pointerEvents:"none",zIndex:400}}),u&&(0,r.jsx)(K,{project:u,open:m,onClose:()=>{p(!1),h(null);let e=new URLSearchParams(f);e.delete("project"),e.delete("lat"),e.delete("lng"),e.toString()?A.push("".concat(window.location.pathname,"?").concat(e.toString())):A.push(window.location.pathname)}})]})}},9388:(e,t,a)=>{"use strict";a.d(t,{D:()=>i,DarkModeProvider:()=>s});var r=a(5155),n=a(2115);let o=(0,n.createContext)();function s(e){let{children:t}=e,[a,s]=(0,n.useState)(!0);return(0,r.jsx)(o.Provider,{value:{isDarkMode:a,toggleDarkMode:()=>s(e=>!e)},children:t})}function i(){return(0,n.useContext)(o)}}}]);