(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{2427:()=>{},6720:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var s=n(5155),a=n(2115),r=n(833),o=n(5402),i=n(3710),c=n(8741);n(8413);var l=n(6756),d=n(9579),h=n(4918),u=n(1983),m=n(6331),p=n(6017),x=n(2091),g=n(5436),j=n(9561),A=n(894),f=n(2241),v=n(152),b=n(1441),N=n(391),y=n(1118),k=n(4286),w=n(4244),C=n(1837),D=n(8205),P=n(2678),L=n(507),S=n(2664),E=n(1888);function I(e){let{categories:t=[],onSelectCategory:n,selectedCategory:r}=e,[o,i]=(0,a.useState)(!1);console.log("ProjectDropdown received categories:",t),console.log("ProjectDropdown selectedCategory:",r);let c=e=>{console.log("ProjectDropdown handleClose called with category:",e),i(!1),n(e)};return(0,s.jsx)(g.A,{sx:{minWidth:120},children:(0,s.jsxs)(P.A,{fullWidth:!0,children:[(0,s.jsx)(L.A,{id:"category-select-label",children:"Category"}),(0,s.jsxs)(S.A,{labelId:"category-select-label",id:"category-select",open:o,onClose:()=>i(!1),onOpen:()=>i(!0),value:r||"",label:"Category",children:[(0,s.jsx)(E.A,{onClick:()=>c(""),children:"All Projects"},"all"),t.map((e,t)=>(0,s.jsx)(E.A,{onClick:()=>c(e.Value||e.value),children:e.Label||e.label||e.Value||e.value},e.Value||e.value||"category-".concat(t)))]})]})})}var F=n(9388);function T(e){let{filteredProjects:t,onSelectCategory:n,selectedCategory:r,markerRefs:o,categories:i=[]}=e,[c,P]=(0,a.useState)(!1),[L,S]=(0,a.useState)(""),E=()=>P(!c),[T,O]=(0,a.useState)(!0),U=(0,l.ko)(),{isDarkMode:W,toggleDarkMode:M}=(0,F.D)();(0,a.useEffect)(()=>{document.body.classList.toggle("dark-mode",W)},[W]),console.log("Filtered Projects:",t),console.log("Selected Category:",r);let _=null==t?void 0:t.filter(e=>{var t,n,s;let a=L.toLowerCase();return(null===(t=e.Name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.DescriptionShort)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(s=e.Description)||void 0===s?void 0:s.toLowerCase().includes(a))}),R=e=>{let n=parseFloat(e.Latitude),s=parseFloat(e.Longitude);console.log("Navigating to:",n,s);let a=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),r="".concat(e.Name,"-").concat(a);isNaN(n)||isNaN(s)?console.error("Invalid coordinates:",n,s):(null==o?void 0:o.current[r])?(U.flyTo([n,s],13,{animate:!0}),o.current[r].openPopup()):console.warn('Marker for key "'.concat(r,'" not found.'))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n  @keyframes intense-pulse-glow {\n    0% {\n      filter: drop-shadow(0 0 8px rgb(255, 0, 0)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4));\n      transform: scale(1);\n    }\n    25% {\n      filter: drop-shadow(0 0 12px rgb(0, 255, 17)) drop-shadow(0 0 30px rgba(255, 255, 0, 0.9)) drop-shadow(0 0 50px rgba(255, 255, 0, 0.5));\n      transform: scale(1.05);\n    }\n    50% {\n      filter: drop-shadow(0 0 15px rgb(0, 255, 255)) drop-shadow(0 0 40px rgba(0, 255, 255, 1)) drop-shadow(0 0 65px rgba(0, 255, 255, 0.6));\n      transform: scale(1.08);\n    }\n    75% {\n      filter: drop-shadow(0 0 12px rgb(255, 0, 255)) drop-shadow(0 0 30px rgba(255, 0, 255, 0.9)) drop-shadow(0 0 50px rgba(255, 0, 255, 0.5));\n      transform: scale(1.05);\n    }\n    100% {\n      filter: drop-shadow(0 0 8px rgb(0, 55, 255)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4));\n      transform: scale(1);\n    }\n  }\n  \n  @keyframes outer-pulse {\n    0% {\n      transform: scale(1);\n      opacity: 0.7;\n    }\n    50% {\n      transform: scale(1.2);\n      opacity: 0.3;\n    }\n    100% {\n      transform: scale(1);\n      opacity: 0.7;\n    }\n  }\n  \n  @keyframes hover-pulse {\n    0% {\n      transform: scale(1);\n      opacity: 0.6;\n    }\n    50% {\n      transform: scale(1.1);\n      opacity: 0.8;\n    }\n    100% {\n      transform: scale(1);\n      opacity: 0.6;\n    }\n  }\n"}),(0,s.jsx)(d.Ay,{variant:"permanent",anchor:T?"left":"right",sx:{width:60,flexShrink:0,"& .MuiDrawer-paper":{width:60,boxSizing:"border-box",backgroundColor:W?"#1a1a1a":"#ffffff",color:W?"#ffffff":"#000000",transition:"background-color 0.3s, color 0.3s"}},children:(0,s.jsxs)(h.A,{children:[(0,s.jsx)(u.Ay,{disablePadding:!0,children:(0,s.jsx)(m.A,{title:"Menu",placement:"right",children:(0,s.jsx)(p.A,{sx:{justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",top:"-10px",left:"-10px",right:"-10px",bottom:"-10px",background:c?"none":"radial-gradient(circle, rgba(255,0,0,0.3) 0%, rgba(255,255,0,0.2) 30%, rgba(0,255,255,0.1) 60%, transparent 100%)",borderRadius:"50%",animation:c?"none":"outer-pulse 4s ease-in-out infinite",zIndex:-1},"&:hover":{"& .MuiSvgIcon-root":{filter:"drop-shadow(0 0 20px rgba(0, 255, 26, 1)) drop-shadow(0 0 35px rgba(0, 255, 26, 0.9)) drop-shadow(0 0 50px rgba(0, 255, 26, 0.6))",transition:"all 0.3s ease",transform:"scale(1.2)"},"&::before":{background:"radial-gradient(circle, rgba(0,255,26,0.4) 0%, rgba(0,255,26,0.3) 30%, rgba(0,255,26,0.1) 60%, transparent 100%)",animation:"hover-pulse 4s ease-in-out infinite"}},"& .MuiSvgIcon-root":{filter:c?"drop-shadow(0 0 5px rgba(255,255,255,0.8))":"drop-shadow(0 0 8px rgb(255, 0, 0)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4))",transition:"all 4.3s ease",animation:c?"none":"intense-pulse-glow 4.5s ease-in-out infinite",transformOrigin:"center"}},onClick:E,children:(0,s.jsx)(x.A,{sx:{minWidth:"auto"},children:(0,s.jsx)(y.A,{})})})})}),(0,s.jsx)(u.Ay,{disablePadding:!0,children:(0,s.jsx)(m.A,{title:"Toggle Dark Mode",placement:"right",children:(0,s.jsx)(p.A,{sx:{justifyContent:"center"},onClick:M,children:(0,s.jsx)(x.A,{sx:{minWidth:"auto"},children:(0,s.jsx)(k.A,{})})})})}),(0,s.jsx)(u.Ay,{disablePadding:!0,children:(0,s.jsx)(m.A,{title:"Toggle Sidebar Position",placement:"right",children:(0,s.jsx)(p.A,{sx:{justifyContent:"center"},onClick:()=>O(!T),children:(0,s.jsx)(x.A,{sx:{minWidth:"auto"},children:(0,s.jsx)(w.A,{})})})})})]})}),(0,s.jsxs)(d.Ay,{anchor:T?"left":"right",open:c,onClose:E,variant:"temporary",PaperProps:{sx:{width:300,backgroundColor:W?"#1a1a1a":"#ffffff",color:W?"#ffffff":"#000000",transition:"background-color 0.3s, color 0.3s"}},children:[(0,s.jsxs)(g.A,{sx:{display:"flex",alignItems:"center",p:1},children:[(0,s.jsx)(j.A,{variant:"h6",children:"Projects"}),(0,s.jsx)(A.A,{onClick:E,children:(0,s.jsx)(C.A,{})})]}),(0,s.jsx)(f.A,{}),(0,s.jsx)(g.A,{sx:{p:2},children:(0,s.jsx)(v.A,{fullWidth:!0,variant:"outlined",placeholder:"Search projects...",value:L,onChange:e=>{S(e.target.value)},InputProps:{startAdornment:(0,s.jsx)(b.A,{position:"start",children:(0,s.jsx)(D.A,{})})}})}),(0,s.jsx)(g.A,{sx:{p:2},children:(0,s.jsx)(I,{onSelectCategory:n,selectedCategory:r,categories:i})}),(0,s.jsx)(h.A,{children:null==_?void 0:_.map(e=>{let n=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),a="".concat(e.Name,"-").concat(n,"-").concat(e.Latitude,"-").concat(e.Longitude);return(0,s.jsx)(u.Ay,{disablePadding:!0,children:(0,s.jsx)(p.A,{onClick:()=>R(e),children:(0,s.jsx)(N.A,{primary:e.Name,secondary:e.DescriptionShort})})},a)})})]})]})}var O=n(6228),U=n(2277),W=n(8562),M=n(2282),_=n(6214),R=n(9241),z=n(8749),B=n(6327),V=n(8917),H=n(2023);n(2427);let Y=e=>{let{open:t,onClose:n,project:r}=e,{isDarkMode:o}=(0,F.D)(),[i,c]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)(0),[m,p]=(0,a.useState)([]),x=(0,a.useRef)(null);if((0,a.useEffect)(()=>{if(!r)return;let e=[];r.ImageUrl&&e.push({src:r.ImageUrl,title:r.Name,type:"project"}),r.Artworks&&r.Artworks.length>0&&r.Artworks.forEach((t,n)=>{t.ImageUrl&&e.push({src:t.ImageUrl,title:t.Title,type:"artwork",description:t.Description})}),p(e)},[r]),(0,a.useEffect)(()=>{let e=()=>{x.current&&c(x.current.scrollTop>50)},t=x.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[]),(0,a.useEffect)(()=>{let e=e=>{l&&("Escape"===e.key&&v(),"ArrowRight"===e.key&&b(),"ArrowLeft"===e.key&&N())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l]),!r)return null;let A=e=>{u(e),d(!0)},v=()=>{d(!1)},b=()=>{u(e=>(e+1)%m.length)},N=()=>{u(e=>(e-1+m.length)%m.length)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(O.A,{open:t,onClose:n,maxWidth:"md",fullWidth:!0,className:"project-modal ".concat(o?"dark-mode":""),children:[(0,s.jsxs)(g.A,{className:"modal-header-visual ".concat(i?"collapsed":""),children:[r.ImageUrl&&(0,s.jsx)("img",{src:r.ImageUrl,alt:r.Name,className:"project-image-header"}),(0,s.jsxs)(g.A,{className:"modal-title-overlay",children:[(0,s.jsx)(j.A,{variant:"h4",component:"h2",className:"modal-title-h2",children:r.Name}),r.FacultyFellow&&(0,s.jsxs)(j.A,{variant:"subtitle1",className:"faculty-fellow",children:["By ",r.FacultyFellow]})]})]}),(0,s.jsx)(U.A,{className:"modal-content",ref:x,children:(0,s.jsxs)(R.A,{container:!0,spacing:4,children:[r.Location&&(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83D\uDCCD Location"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.Location})]})}),r.DescriptionLong||r.DescriptionShort?(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83D\uDCDD Description"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.DescriptionLong||r.DescriptionShort})]})}):null,r.Background&&(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83C\uDFAF Background"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.Background})]})}),r.Education&&r.Education.length>0&&(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83C\uDF93 Education"}),r.Education.map((e,t)=>(0,s.jsx)(j.A,{variant:"body1",className:"education-item",children:e},t))]})}),(r.Affiliation||r.College||r.Department||r.Year)&&(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(R.A,{container:!0,spacing:3,children:[r.Affiliation&&(0,s.jsx)(R.A,{xs:12,sm:6,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83C\uDFE2 Affiliation"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.Affiliation})]})}),r.College&&(0,s.jsx)(R.A,{xs:12,sm:6,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83C\uDFDBï¸ College"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.College})]})}),r.Department&&(0,s.jsx)(R.A,{xs:12,sm:6,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83D\uDCDA Department"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.Department})]})}),r.Year&&(0,s.jsx)(R.A,{xs:12,sm:6,children:(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83D\uDCC5 Year"}),(0,s.jsx)(j.A,{variant:"body1",className:"section-content",children:r.Year})]})})]})}),r.Outcome&&r.Outcome.Type&&(0,s.jsxs)(R.A,{xs:12,children:[(0,s.jsx)(f.A,{className:"section-divider"}),(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsx)(j.A,{variant:"h6",className:"section-title",children:"\uD83C\uDFAF Outcome"}),(0,s.jsxs)(W.A,{className:"outcome-card",children:[(0,s.jsx)(j.A,{variant:"h6",className:"outcome-title",children:r.Outcome.Title}),(0,s.jsx)(j.A,{variant:"body1",className:"outcome-summary",children:r.Outcome.Summary}),r.Outcome.Link&&(0,s.jsx)(M.A,{variant:"contained",color:"primary",href:r.Outcome.Link,target:"_blank",rel:"noopener noreferrer",className:"outcome-button",children:"View Outcome"})]})]})]}),r.HasArtwork&&r.Artworks&&r.Artworks.length>0&&(0,s.jsxs)(R.A,{xs:12,children:[(0,s.jsx)(f.A,{className:"section-divider"}),(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsxs)(j.A,{variant:"h6",className:"section-title",children:["\uD83C\uDFA8 Artworks (",r.Artworks.length,")"]}),(0,s.jsx)("div",{className:"artwork-gallery",children:r.Artworks.map((e,t)=>(0,s.jsxs)(W.A,{className:"artwork-card",onClick:()=>{let t=m.findIndex(t=>t.src===e.ImageUrl);-1!==t&&A(t)},children:[e.ImageUrl&&(0,s.jsxs)("div",{className:"artwork-image-container",children:[(0,s.jsx)("img",{src:e.ImageUrl,alt:e.Title,className:"artwork-image"}),(0,s.jsx)("div",{className:"artwork-image-overlay",children:(0,s.jsx)(z.A,{})})]}),(0,s.jsxs)("div",{className:"artwork-content",children:[(0,s.jsx)(j.A,{variant:"h6",className:"artwork-title",children:e.Title}),(0,s.jsx)(j.A,{variant:"body2",className:"artwork-description",children:e.Description})]})]},t))})]})]}),r.HasPoems&&r.Poems&&r.Poems.length>0&&(0,s.jsxs)(R.A,{xs:12,children:[(0,s.jsx)(f.A,{className:"section-divider"}),(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsxs)(j.A,{variant:"h6",className:"section-title",children:["\uD83D\uDCDC Poems (",r.Poems.length,")"]}),(0,s.jsx)(R.A,{container:!0,spacing:3,children:r.Poems.map((e,t)=>(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(W.A,{className:"poem-card",children:[(0,s.jsx)(j.A,{variant:"h6",className:"poem-title",children:e.Title}),(0,s.jsx)(j.A,{variant:"body1",className:"poem-content",children:e.Content}),e.Author&&(0,s.jsxs)(j.A,{variant:"subtitle2",className:"poem-author",children:["- ",e.Author]})]})},t))})]})]}),r.Activities&&r.Activities.length>0&&(0,s.jsxs)(R.A,{xs:12,children:[(0,s.jsx)(f.A,{className:"section-divider"}),(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsxs)(j.A,{variant:"h6",className:"section-title",children:["\uD83C\uDFAA Activities (",r.Activities.length,")"]}),(0,s.jsx)(R.A,{container:!0,spacing:3,children:r.Activities.map((e,t)=>(0,s.jsx)(R.A,{xs:12,children:(0,s.jsxs)(W.A,{className:"activity-card",children:[(0,s.jsx)(j.A,{variant:"h6",className:"activity-title",children:e.Title}),(0,s.jsx)(j.A,{variant:"body1",className:"activity-description",children:e.Description}),e.Date&&(0,s.jsxs)(j.A,{variant:"caption",className:"activity-date",children:["\uD83D\uDCC5 ",e.Date]}),e.Link&&(0,s.jsx)(M.A,{variant:"text",color:"primary",href:e.Link,target:"_blank",rel:"noopener noreferrer",className:"activity-link",children:"Learn More"})]})},t))})]})]}),r.relatedUrls&&r.relatedUrls.length>0&&(0,s.jsxs)(R.A,{xs:12,children:[(0,s.jsx)(f.A,{className:"section-divider"}),(0,s.jsxs)(g.A,{className:"info-section",children:[(0,s.jsxs)(j.A,{variant:"h6",className:"section-title",children:["\uD83D\uDD17 Related Links (",r.relatedUrls.length,")"]}),(0,s.jsx)(R.A,{container:!0,spacing:2,children:r.relatedUrls.map((e,t)=>(0,s.jsx)(R.A,{xs:12,children:(0,s.jsx)(M.A,{href:e.url,target:"_blank",rel:"noopener noreferrer",variant:"outlined",fullWidth:!0,className:"related-link-button",children:e.title})},t))})]})]})]})}),(0,s.jsx)(_.A,{className:"modal-actions",children:(0,s.jsx)(M.A,{onClick:n,variant:"contained",className:"close-button",children:"Close"})})]}),(0,s.jsx)("div",{className:"image-lightbox ".concat(l?"open":""),onClick:v,children:(0,s.jsxs)("div",{className:"lightbox-content",onClick:e=>e.stopPropagation(),children:[m.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:m[h].src,alt:m[h].title,className:"lightbox-image"}),(0,s.jsx)(j.A,{className:"lightbox-title",children:m[h].title}),m[h].description&&(0,s.jsx)(j.A,{variant:"body2",style:{color:"white",textAlign:"center",marginTop:"0.5rem",opacity:.8},children:m[h].description})]}),(0,s.jsx)("button",{className:"lightbox-close",onClick:v,children:(0,s.jsx)(B.A,{})}),m.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"lightbox-nav prev",onClick:N,children:(0,s.jsx)(V.A,{})}),(0,s.jsx)("button",{className:"lightbox-nav next",onClick:b,children:(0,s.jsx)(H.A,{})})]})]})})]})};var q=n(2127);let G=[32.2217,-110.9265],J=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color: #e74c3c; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[12,12],iconAnchor:[6,6],popupAnchor:[0,-5]}),K=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color:rgb(0, 255, 247); width: 16px; height: 16px; border-radius: 50%; border: 3px solid blue; box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);"></div>',iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-5]});function Q(){let{projects:e,filteredProjects:t,filterProjects:n,categories:c}=function(){let[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)([]),[r,o]=(0,a.useState)([]),[i,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let n=await e.json();t(n),s(n);let a=[...new Set(n.map(e=>e.ProjectCategory).filter(Boolean))];console.log("Found categories in data:",a);let r={ArtExhibition:"Art Exhibition",Research:"Research",CommunityEngagement:"Community Engagement",Performance:"Performance",Workshop:"Workshop",Conference:"Conference",Publication:"Publication",Other:"Other"},i=a.map(e=>({Value:e,Label:r[e]||e}));console.log("Processed categories:",i),o(i)}catch(e){console.error("Error fetching data:",e),c(e.message)}})()},[]),{projects:e,filteredProjects:n,categories:r,error:i,filterProjects:t=>{if(console.log("Filtering by category:",t),!t){s(e);return}let n=e.filter(e=>{let n=e.ProjectCategory===t;return console.log("Project ".concat(e.Name,": ProjectCategory=").concat(e.ProjectCategory,", matches=").concat(n)),n});console.log("Filtered ".concat(n.length," projects out of ").concat(e.length," total")),s(n)},getProjectsWithArtworks:()=>e.filter(e=>e.Artworks&&e.Artworks.length>0),getProjectsWithPoems:()=>e.filter(e=>e.Poems&&e.Poems.length>0),getUniqueActivities:()=>{let t=new Set;return e.forEach(e=>{e.Activities&&e.Activities.forEach(e=>{t.add(e)})}),Array.from(t)}}}(),[l,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),x=(0,a.useRef)({});(0,a.useRef)(null);let[g,j]=(0,a.useState)(null),{isDarkMode:A}=(0,F.D)(),f=e=>{u(e),p(!0)};return(0,a.useEffect)(()=>{t&&t.forEach((e,t)=>{let n="".concat(e.Name,"-").concat(t),s=x.current[n];if(s){let n=document.createElement("div");n.className="responsive-popup-content",n.innerHTML='\n            <img \n              src="'.concat(e.ImageUrl||"https://via.placeholder.com/150",'" \n              alt="').concat(e.Name,'" \n              class="popup-image" \n            />\n            <strong class="popup-title">').concat(e.Name,'</strong>\n            <p class="popup-description">').concat(e.DescriptionShort||e.Description||"",'</p>\n            <button id="more-details-').concat(t,'" class="popup-button">\n              More Details\n            </button>\n        ');let a=q.L({hasTip:!1,autoPan:!0,className:A?"dark-mode-popup":"light-mode-popup"}).setContent(n);s.bindPopup(a),s.on("click",()=>{Object.values(x.current).forEach(e=>{e&&e.setIcon(J)}),s.setIcon(K),j(s)}),s.on("popupopen",()=>{Object.values(x.current).forEach(e=>{e&&e.setIcon(J)}),s.setIcon(K),j(s)}),s.on("popupclose",()=>{s.setIcon(J),j(null)});let r=n.querySelector("#more-details-".concat(t));r&&r.addEventListener("click",()=>{f(e)})}})},[t,A]),(0,s.jsxs)("div",{className:"map-container",children:[(0,s.jsxs)(r.W,{center:G,zoom:11,style:{height:"100vh",width:"100%"},children:[(0,s.jsx)(o.e,{url:A?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),null==t?void 0:t.map((e,t)=>{let n="".concat(e.Name,"-").concat(t);return(0,s.jsx)(i.p,{position:[e.Latitude,e.Longitude],icon:J,ref:e=>{e&&(x.current[n]=e)}},n)}),(0,s.jsx)(T,{filteredProjects:t,onSelectCategory:e=>{console.log("Map component received category selection:",e),d(e),n(e)},selectedCategory:l,markerRefs:x,categories:c})]}),h&&(0,s.jsx)(Y,{project:h,open:m,onClose:()=>{p(!1),u(null)}})]})}},9388:(e,t,n)=>{"use strict";n.d(t,{D:()=>i,DarkModeProvider:()=>o});var s=n(5155),a=n(2115);let r=(0,a.createContext)();function o(e){let{children:t}=e,[n,o]=(0,a.useState)(!1);return(0,s.jsx)(r.Provider,{value:{isDarkMode:n,toggleDarkMode:()=>o(e=>!e)},children:t})}function i(){return(0,a.useContext)(r)}}}]);