(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[638],{2427:()=>{},4638:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ep});var o=r(5155),a=r(2115),s=r(6756),l=r(833),n=r(5402),i=r(3710),c=r(8741);r(8413);var d=r(9579),f=r(5436),u=r(9561),p=r(9234),x=r(894),h=r(152),g=r(1441),m=r(5256),b=r(615),j=r(4490),y=r(4918),v=r(1983),w=r(6017),k=r(2091),N=r(562),S=r(391),C=r(7446),A=r(4499),P=r(7159),L=r(6327),T=r(8205),I=r(1655),z=r(9313),D=r(1798),E=r(1792),M=r(350),R=r(4244),U=r(2678),W=r(507),F=r(2376);function H(e){let{categories:t=[],onSelectCategory:r,selectedCategory:s}=e,[l,n]=(0,a.useState)(!1);return console.log("ProjectDropdown received categories:",t),console.log("ProjectDropdown selectedCategory:",s),(0,o.jsx)(f.A,{sx:{minWidth:120},children:(0,o.jsxs)(U.A,{fullWidth:!0,children:[(0,o.jsx)(W.A,{id:"category-select-label",children:"Category"}),(0,o.jsxs)(F.A,{labelId:"category-select-label",id:"category-select",open:l,onClose:()=>n(!1),onOpen:()=>n(!0),value:s||"",label:"Category",onChange:e=>{r(e.target.value)},children:[(0,o.jsx)(A.A,{value:"",children:"All Projects"}),t.map((e,t)=>(0,o.jsx)(A.A,{value:e.Value||e.value,children:e.Label||e.label||e.Value||e.value},e.Value||e.value||"category-".concat(t)))]})]})})}var O=r(9388);function _(e){let{filteredProjects:t,searchFilteredProjects:r,onSelectCategory:s,selectedCategory:l,markerRefs:n,categories:i=[],open:c,onClose:U,searchTerm:W,setSearchTerm:F,onProjectClick:_}=e,[B,Y]=(0,a.useState)(!0),[Z,q]=(0,a.useState)(!1),[V,X]=(0,a.useState)(null),G=()=>Y(!B),{isDarkMode:J,toggleDarkMode:K}=(0,O.D)(),[Q,$]=(0,a.useState)(!0),[ee,et]=(0,a.useState)("normal"),[er,eo]=(0,a.useState)({roads:!0,labels:!0,terrain:!1});(0,a.useEffect)(()=>{document.body.classList.toggle("dark-mode",J)},[J]),console.log("Filtered Projects:",t),console.log("Selected Category:",l);let ea=()=>{X(null)};return(0,o.jsx)("div",{style:{position:"relative",height:"100%"},children:(0,o.jsxs)(d.Ay,{anchor:B?"left":"right",open:c,onClose:U,variant:"temporary",PaperProps:{sx:{width:420,background:J?"rgba(26, 26, 26, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",color:J?"#00ff88":"#333333",border:"none",boxShadow:J?"0 8px 32px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(0, 255, 136, 0.1)":"0 8px 32px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(0, 0, 0, 0.05)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"}},children:[(0,o.jsxs)(f.A,{sx:{p:2,background:"transparent",position:"relative",overflow:"hidden"},children:[(0,o.jsxs)(f.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,o.jsx)(u.A,{variant:"h6",sx:{color:J?"#00ff88":"#333333",fontWeight:600,letterSpacing:"-0.3px",fontSize:"18px"},children:"StoryMap"}),(0,o.jsxs)(f.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,o.jsx)(p.A,{label:(null==r?void 0:r.length)||0,size:"small",sx:{backgroundColor:J?"rgba(0, 255, 136, 0.2)":"rgba(0, 255, 136, 0.1)",color:"#00ff88",fontSize:"11px",height:"22px",fontWeight:600}}),(0,o.jsx)(x.A,{size:"small",onClick:e=>{X(e.currentTarget)},sx:{color:J?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)","&:hover":{backgroundColor:J?"rgba(0, 255, 136, 0.1)":"rgba(0, 255, 136, 0.05)"}},children:(0,o.jsx)(P.A,{fontSize:"small"})}),(0,o.jsx)(x.A,{size:"small",onClick:U,sx:{color:J?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)","&:hover":{backgroundColor:J?"rgba(255, 0, 0, 0.1)":"rgba(255, 0, 0, 0.05)"}},children:(0,o.jsx)(L.A,{fontSize:"small"})})]})]}),(0,o.jsxs)(f.A,{sx:{display:"flex",gap:1,alignItems:"center",mb:1},children:[(0,o.jsx)(h.A,{size:"small",placeholder:"Search projects...",value:W,onChange:e=>{F(e.target.value)},InputProps:{startAdornment:(0,o.jsx)(g.A,{position:"start",children:(0,o.jsx)(T.A,{sx:{color:J?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",fontSize:18}})})},sx:{flex:1,"& .MuiOutlinedInput-root":{backgroundColor:J?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.03)",borderRadius:"8px",fontSize:"14px","& fieldset":{borderColor:J?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},"&:hover fieldset":{borderColor:"rgba(0, 255, 136, 0.3)"},"&.Mui-focused fieldset":{borderColor:"#00ff88"}},"& .MuiInputBase-input":{color:J?"#ffffff":"#333333","&::placeholder":{color:J?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"}}}}),(0,o.jsx)(x.A,{size:"small",onClick:()=>q(!Z),sx:{color:J?Z?"#00ff88":"rgba(255, 255, 255, 0.7)":Z?"#00ff88":"rgba(0, 0, 0, 0.6)",backgroundColor:Z?J?"rgba(0, 255, 136, 0.1)":"rgba(0, 255, 136, 0.05)":"transparent","&:hover":{backgroundColor:J?"rgba(0, 255, 136, 0.1)":"rgba(0, 255, 136, 0.05)"}},children:(0,o.jsx)(I.A,{fontSize:"small"})})]}),(0,o.jsx)(m.A,{in:Z,children:(0,o.jsxs)(f.A,{sx:{pt:1,borderTop:"1px solid ".concat(J?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)")},children:[(0,o.jsxs)(f.A,{sx:{mb:2},children:[(0,o.jsx)(u.A,{variant:"caption",sx:{color:J?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)",mb:1,display:"block",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Category"}),(0,o.jsx)(H,{onSelectCategory:s,selectedCategory:l,categories:i})]}),(0,o.jsx)(b.A,{control:(0,o.jsx)(j.A,{checked:Q,onChange:e=>$(e.target.checked),size:"small",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#00ff88","&:hover":{backgroundColor:"rgba(0, 255, 136, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#00ff88"}}}),label:(0,o.jsxs)(u.A,{sx:{color:"inherit",fontSize:"12px",display:"flex",alignItems:"center",gap:.5},children:[Q?(0,o.jsx)(z.A,{sx:{fontSize:14}}):(0,o.jsx)(D.A,{sx:{fontSize:14}}),"Show Project Container"]}),sx:{color:J?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)",ml:0}})]})})]}),(0,o.jsx)(f.A,{sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column",minHeight:0},children:(0,o.jsxs)(y.A,{sx:{flex:1,overflow:"auto",backgroundColor:"transparent",minHeight:0,pt:0,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:J?"rgba(0, 255, 136, 0.2)":"rgba(0, 0, 0, 0.1)",borderRadius:"2px"},"&::-webkit-scrollbar-thumb:hover":{background:J?"rgba(0, 255, 136, 0.4)":"rgba(0, 0, 0, 0.2)"}},children:[null==r?void 0:r.map(e=>{var r,a;let s=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),l="".concat(e.Name,"-").concat(s,"-").concat(e.Latitude,"-").concat(e.Longitude);return(0,o.jsx)(v.Ay,{disablePadding:!0,sx:{mb:.5},children:(0,o.jsxs)(w.A,{onClick:()=>_(e,s),sx:{color:J?"#ffffff":"#333333",borderRadius:"8px",mx:1,py:1.5,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:J?"rgba(0, 255, 136, 0.08)":"rgba(0, 255, 136, 0.04)",transform:"translateX(2px)"},"& .MuiListItemText-primary":{color:"inherit",fontWeight:500,fontSize:"14px"},"& .MuiListItemText-secondary":{color:J?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.5)",fontSize:"12px",mt:.5}},children:[(0,o.jsx)(k.A,{sx:{minWidth:44},children:(0,o.jsx)(N.A,{src:e.ImageUrl||e.imageUrl,sx:{width:36,height:36,backgroundColor:J?"rgba(0, 255, 136, 0.1)":"rgba(0, 255, 136, 0.05)",color:"#00ff88",fontSize:"14px",fontWeight:600},children:null===(a=e.Name)||void 0===a?void 0:null===(r=a.charAt(0))||void 0===r?void 0:r.toUpperCase()})}),(0,o.jsx)(S.A,{primary:e.Name,secondary:e.DescriptionShort})]})},l)}),(!r||0===r.length)&&(0,o.jsxs)(f.A,{sx:{p:4,textAlign:"center",color:J?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)"},children:[(0,o.jsx)(T.A,{sx:{fontSize:48,mb:2,opacity:.3}}),(0,o.jsx)(u.A,{variant:"body2",sx:{fontSize:"14px"},children:W?"No projects found":"Search for projects to get started"})]})]})}),(0,o.jsxs)(C.A,{anchorEl:V,open:!!V,onClose:ea,PaperProps:{sx:{backgroundColor:J?"rgba(26, 26, 26, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",border:"1px solid ".concat(J?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"),boxShadow:J?"0 8px 32px rgba(0, 0, 0, 0.8)":"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[(0,o.jsxs)(A.A,{onClick:()=>{K(),ea()},children:[(0,o.jsx)(k.A,{sx:{color:J?"#ffffff":"#333333"},children:J?(0,o.jsx)(E.A,{}):(0,o.jsx)(M.A,{})}),(0,o.jsx)(S.A,{primary:J?"Light Mode":"Dark Mode"})]}),(0,o.jsxs)(A.A,{onClick:()=>{G(),ea()},children:[(0,o.jsx)(k.A,{sx:{color:J?"#ffffff":"#333333"},children:(0,o.jsx)(R.A,{})}),(0,o.jsx)(S.A,{primary:"Move to ".concat(B?"Right":"Left")})]})]})]})})}r(2427);var B=r(8617),Y=r(9928),Z=r(3467),q=r(2423),V=r(5765),X=r(8058),G=r(767),J=r(3518),K=r(6967),Q=r(9124),$=r(5683),ee=r(9191),et=r(1556);function er(e){let{poems:t,selectedPoem:r,setSelectedPoem:a,isAnimating:s,startAnimation:l,resetAnimation:n}=e,{isDarkMode:i}=(0,O.D)();return t&&0!==t.length?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("h3",{className:"font-semibold text-sm mb-3",style:{color:i?"#ffffff":"#111827"},children:"Select a Poem"}),(0,o.jsx)("div",{className:"grid gap-2",children:t.map((e,t)=>(0,o.jsxs)(Q.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(t),className:"text-left p-3 rounded-lg transition-all duration-200",style:{backgroundColor:r===t?i?"rgba(30, 58, 138, 0.3)":"rgba(59, 130, 246, 0.1)":i?"rgba(31, 41, 55, 0.5)":"rgba(243, 244, 246, 0.8)",border:r===t?i?"1px solid rgba(59, 130, 246, 0.5)":"1px solid rgba(59, 130, 246, 0.3)":"1px solid transparent",color:r===t?i?"#ffffff":"#111827":i?"#d1d5db":"#6b7280","&:hover":{backgroundColor:r===t?i?"rgba(30, 58, 138, 0.3)":"rgba(59, 130, 246, 0.1)":i?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.8)",color:i?"#ffffff":"#111827"}},children:[(0,o.jsx)("div",{className:"font-medium text-sm",children:e.Title}),(0,o.jsx)("div",{className:"text-xs mt-1",style:{color:i?"#9ca3af":"#6b7280"},children:e.Author}),e.location&&(0,o.jsx)("div",{className:"text-xs mt-1",style:{color:"#3b82f6"},children:e.location})]},t))})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsxs)(Q.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,disabled:s,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:s?i?"#4b5563":"#9ca3af":"#3b82f6",color:"#ffffff","&:hover":{backgroundColor:s?i?"#4b5563":"#9ca3af":"#2563eb"}},children:[(0,o.jsx)(ee.A,{className:"w-4 h-4"}),s?"Playing...":"Animate"]}),(0,o.jsxs)(Q.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:i?"#4b5563":"#6b7280",color:"#ffffff","&:hover":{backgroundColor:i?"#374151":"#4b5563"}},children:[(0,o.jsx)(et.A,{className:"w-4 h-4"}),"Reset"]})]})]}):(0,o.jsxs)("div",{className:"italic text-center py-8",style:{color:i?"#9ca3af":"#6b7280"},children:[(0,o.jsx)(Z.A,{className:"w-8 h-8 mx-auto mb-2 opacity-60"}),"No poems available for this project."]})}function eo(e){var t,r;let{poem:s,completedLines:l,currentLineIndex:n}=e,{isDarkMode:i}=(0,O.D)();if(!s)return null;let c=(null===(r=s.Content)||void 0===r?void 0:null===(t=r.split("\n"))||void 0===t?void 0:t.filter(e=>e.trim()))||[],d=e=>{let{text:t,isActive:r,isComplete:s,delay:l=0}=e,[n,c]=a.useState("");return(0,a.useEffect)(()=>{if(!r){s?c(t):c("");return}let e=0,o=setInterval(()=>{c(t.slice(0,e+1)),++e>=t.length&&clearInterval(o)},50+30*Math.random());return()=>clearInterval(o)},[r,t,s]),(0,o.jsxs)(Q.P.div,{initial:{opacity:0,y:10},animate:{opacity:r||s?1:.3,y:r||s?0:10},transition:{duration:.5,delay:l},className:"leading-relaxed",style:{color:r?"#93c5fd":s?i?"#d1d5db":"#374151":i?"#6b7280":"#9ca3af"},children:[n,r&&n.length<t.length&&(0,o.jsx)(Q.P.span,{animate:{opacity:[1,0]},transition:{duration:.8,repeat:1/0,repeatType:"reverse"},style:{color:"#60a5fa"},children:"|"})]})};return(0,o.jsx)($.N,{mode:"wait",children:(0,o.jsxs)(Q.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"space-y-4",children:[(0,o.jsxs)("div",{className:"border-l-4 pl-4 py-2",style:{borderColor:"#3b82f6"},children:[(0,o.jsx)(Q.P.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-xl font-bold mb-1",style:{color:i?"#ffffff":"#111827"},children:null==s?void 0:s.Title}),(null==s?void 0:s.Author)&&(0,o.jsxs)(Q.P.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"text-sm",style:{color:i?"#9ca3af":"#6b7280"},children:["by ",s.Author]}),(null==s?void 0:s.location)&&(0,o.jsxs)(Q.P.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"text-xs mt-1",style:{color:"#3b82f6"},children:["\uD83D\uDCCD ",s.location]})]}),(0,o.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"rounded-lg p-6 border",style:{backgroundColor:i?"rgba(17, 24, 39, 0.5)":"rgba(249, 250, 251, 0.8)",borderColor:i?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.8)"},children:(0,o.jsx)("div",{className:"space-y-3 text-base font-mono",children:c.map((e,t)=>(0,o.jsx)(d,{text:e,isActive:n===t,isComplete:l.includes(t),delay:.1*t},"".concat(s.Title,"-").concat(t)))})})]},s.Title)})}function ea(e){var t,r,s,l,n,i,c,d;let{project:f,onClose:u}=e,[p,x]=(0,a.useState)(0),[h,g]=(0,a.useState)([]),[m,b]=(0,a.useState)(0),{isDarkMode:j}=(0,O.D)(),[y,v]=(0,a.useState)(0),[w,k]=(0,a.useState)(!1),[N,S]=(0,a.useState)([]),[C,A]=(0,a.useState)(-1),P=()=>{var e,t;if(!f.Poems||!f.Poems[y])return;let r=(null===(t=f.Poems[y].Content)||void 0===t?void 0:null===(e=t.split("\n"))||void 0===e?void 0:e.filter(e=>e.trim()))||[];k(!0),S([]),A(-1),r.forEach((e,t)=>{setTimeout(()=>{A(t),setTimeout(()=>{S(e=>[...e,t]),t===r.length-1&&(k(!1),A(-1))},2e3+50*e.length)},3e3*t)})},L=()=>{k(!1),S([]),A(-1)};if((0,a.useEffect)(()=>{if(!f)return;let e=[];f.ImageUrl&&e.push({src:f.ImageUrl,title:f.Name,type:"project"}),f.Artworks&&f.Artworks.length>0&&f.Artworks.forEach(t=>{t.ImageUrl&&e.push({src:t.ImageUrl,title:t.Title,type:"artwork",description:t.Description})}),g(e)},[f]),!f)return null;let T=[{label:"Overview",icon:B.A,content:"overview"},...f.HasArtwork&&(null===(t=f.Artworks)||void 0===t?void 0:t.length)>0?[{label:"Artworks",icon:Y.A,content:"artworks",count:f.Artworks.length}]:[],...f.HasPoems&&(null===(r=f.Poems)||void 0===r?void 0:r.length)>0?[{label:"Poems",icon:Z.A,content:"poems",count:f.Poems.length}]:[],...(null===(s=f.Activities)||void 0===s?void 0:s.length)>0?[{label:"Activities",icon:q.A,content:"activities",count:f.Activities.length}]:[],...(null===(l=f.relatedUrls)||void 0===l?void 0:l.length)>0?[{label:"Links",icon:V.A,content:"links",count:f.relatedUrls.length}]:[]],I=()=>(0,o.jsxs)("div",{className:"space-y-6",children:[f.ImageUrl&&(0,o.jsx)("div",{className:"mb-4 flex justify-center",children:(0,o.jsx)("img",{src:f.ImageUrl,alt:f.Name,className:"rounded-lg shadow-lg max-w-full max-h-56 object-contain border",style:{width:"100%",maxWidth:320,borderColor:j?"#374151":"#e5e7eb",backgroundColor:j?"#000000":"#ffffff"}})}),(f.DescriptionLong||f.DescriptionShort)&&(0,o.jsxs)("section",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold mb-2",style:{color:j?"#ffffff":"#111827"},children:"Description"}),(0,o.jsx)("p",{className:"text-lg leading-relaxed",style:{color:j?"#d1d5db":"#374151"},children:f.DescriptionLong||f.DescriptionShort})]}),f.Background&&(0,o.jsxs)("section",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold mb-2",style:{color:j?"#ffffff":"#111827"},children:"Background"}),(0,o.jsx)("p",{className:"text-lg leading-relaxed",style:{color:j?"#d1d5db":"#374151"},children:f.Background})]})]}),z=()=>{var e;return(0,o.jsx)("div",{className:"space-y-3",children:null===(e=f.Artworks)||void 0===e?void 0:e.map((e,t)=>(0,o.jsxs)("div",{className:"group flex items-start gap-3 p-2 rounded-lg cursor-pointer transition-colors",style:{backgroundColor:"transparent","&:hover":{backgroundColor:j?"#374151":"#f3f4f6"}},onClick:()=>b(t+(f.ImageUrl?1:0)),children:[e.ImageUrl&&(0,o.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,o.jsx)("img",{src:e.ImageUrl,alt:e.Title,className:"w-12 h-12 object-cover rounded"}),(0,o.jsx)("div",{className:"absolute inset-0 rounded transition-colors flex items-center justify-center",style:{backgroundColor:"rgba(0, 0, 0, 0)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:(0,o.jsx)(X.A,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),(0,o.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,o.jsx)("h4",{className:"text-base font-medium mb-1 break-words",style:{color:j?"#ffffff":"#111827"},children:e.Title}),(0,o.jsx)("p",{className:"text-sm leading-relaxed break-words whitespace-pre-line",style:{color:j?"#d1d5db":"#6b7280"},children:e.DescriptionLong||e.Description})]})]},t))})},D=()=>(0,o.jsx)(er,{poems:f.Poems||[],selectedPoem:y,setSelectedPoem:e=>{v(e),L()},isAnimating:w,startAnimation:P,resetAnimation:L}),E=()=>{var e;return(0,o.jsx)("div",{className:"space-y-3",children:null===(e=f.Activities)||void 0===e?void 0:e.map((e,t)=>(0,o.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:j?"#374151":"#f3f4f6"},children:[(0,o.jsx)("h4",{className:"font-medium text-sm mb-1",style:{color:j?"#ffffff":"#111827"},children:e.Title}),(0,o.jsx)("p",{className:"text-sm mb-2",style:{color:j?"#d1d5db":"#6b7280"},children:e.Description}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[e.Date&&(0,o.jsx)("span",{className:"text-xs",style:{color:j?"#9ca3af":"#6b7280"},children:e.Date}),e.Link&&(0,o.jsxs)("a",{href:e.Link,target:"_blank",rel:"noopener noreferrer",className:"text-xs flex items-center gap-1",style:{color:"#3b82f6","&:hover":{color:"#60a5fa"}},children:["Learn More ",(0,o.jsx)(V.A,{className:"w-3 h-3"})]})]})]},t))})},M=()=>{var e;return(0,o.jsx)("div",{className:"space-y-2",children:null===(e=f.relatedUrls)||void 0===e?void 0:e.map((e,t)=>(0,o.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg transition-colors text-sm",style:{color:j?"#d1d5db":"#6b7280","&:hover":{backgroundColor:j?"#374151":"#f3f4f6",color:j?"#ffffff":"#111827"}},children:[(0,o.jsx)(V.A,{className:"w-4 h-4"}),e.title]},t))})},R=h[m]||h[0];return(0,o.jsxs)("div",{className:"h-screen w-screen grid grid-cols-[420px_1fr] fixed top-0 left-0 z-[2000]",style:{backgroundColor:j?"#111827":"#ffffff"},children:[(0,o.jsxs)("div",{className:"border-r flex flex-col min-w-0",style:{width:420,backgroundColor:j?"#111827":"#f9fafb",borderColor:j?"#374151":"#e5e7eb"},children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:j?"#374151":"#e5e7eb"},children:[(0,o.jsx)("h1",{className:"font-bold text-2xl truncate pr-2",style:{color:j?"#ffffff":"#111827"},children:f.Name}),(0,o.jsx)("button",{onClick:u,className:"p-2 rounded-lg transition-colors",style:{color:j?"#9ca3af":"#6b7280","&:hover":{backgroundColor:j?"#374151":"#f3f4f6"}},children:(0,o.jsx)(G.A,{className:"w-6 h-6"})})]}),(0,o.jsx)("div",{className:"flex overflow-x-auto scrollbar-hide border-b",style:{borderColor:j?"#374151":"#e5e7eb"},children:T.map((e,t)=>{let r=e.icon;return(0,o.jsxs)("button",{onClick:()=>x(t),className:"flex items-center gap-2 px-4 py-3 text-base font-semibold border-b-2 transition-colors whitespace-nowrap",style:{color:p===t?"#3b82f6":j?"#d1d5db":"#6b7280",borderBottomColor:p===t?"#3b82f6":"transparent",backgroundColor:p===t?j?"#374151":"#f3f4f6":"transparent","&:hover":{color:p===t?"#3b82f6":"#60a5fa"}},children:[(0,o.jsx)(r,{className:"w-5 h-5"}),e.label,e.count&&(0,o.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:j?"#4b5563":"#e5e7eb",color:j?"#d1d5db":"#374151"},children:e.count})]},e.label)})}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto p-6",style:{maxHeight:"calc(100vh - 112px)"},children:(null===(n=T[p])||void 0===n?void 0:n.content)==="poems"?D():(()=>{var e;switch(null===(e=T[p])||void 0===e?void 0:e.content){case"overview":return I();case"artworks":return z();case"poems":return D();case"activities":return E();case"links":return M();default:return null}})()})]}),(0,o.jsx)("div",{className:"flex items-center justify-center relative",style:{backgroundColor:j?"#000000":"#f9fafb"},children:(null===(i=T[p])||void 0===i?void 0:i.content)==="overview"?f.ImageUrl?(0,o.jsx)("img",{src:f.ImageUrl,alt:f.Name,className:"max-h-[70vh] max-w-full object-contain rounded-lg shadow-lg border",style:{width:"100%",maxWidth:600,borderColor:j?"#374151":"#e5e7eb",backgroundColor:j?"#000000":"#ffffff"}}):(0,o.jsxs)("div",{className:"text-center",style:{color:j?"#9ca3af":"#6b7280"},children:[(0,o.jsx)(Y.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,o.jsx)("p",{className:"text-sm",children:"No image available"})]}):(null===(c=T[p])||void 0===c?void 0:c.content)==="poems"?(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{minHeight:"60vh"},children:(0,o.jsx)("div",{className:"w-full max-w-2xl mx-auto p-8 rounded-2xl shadow-2xl border",style:{borderColor:j?"#1e3a8a":"#dbeafe",background:j?"linear-gradient(135deg, #181c24 0%, #1e2233 50%, #23293a 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%)",opacity:.9},children:(0,o.jsx)(eo,{poem:null===(d=f.Poems)||void 0===d?void 0:d[y],completedLines:N,currentLineIndex:C})})}):R?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:R.src,alt:R.title,className:"max-h-full max-w-full object-contain"}),(0,o.jsx)("div",{className:"absolute top-4 right-4 backdrop-blur-sm rounded-lg px-2 py-1",style:{backgroundColor:j?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.8)"},children:(0,o.jsxs)("span",{className:"text-xs",style:{color:j?"#ffffff":"#111827"},children:[m+1," / ",h.length]})}),h.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>b((m-1+h.length)%h.length),className:"absolute left-4 top-1/2 -translate-y-1/2 backdrop-blur-sm p-2 rounded-lg transition-colors",style:{backgroundColor:j?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.8)"},children:(0,o.jsx)(J.A,{className:"w-5 h-5",style:{color:j?"#ffffff":"#111827"}})}),(0,o.jsx)("button",{onClick:()=>b((m+1)%h.length),className:"absolute right-4 top-1/2 -translate-y-1/2 backdrop-blur-sm p-2 rounded-lg transition-colors",style:{backgroundColor:j?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.8)"},children:(0,o.jsx)(K.A,{className:"w-5 h-5",style:{color:j?"#ffffff":"#111827"}})})]})]}):(0,o.jsxs)("div",{className:"text-center",style:{color:j?"#9ca3af":"#6b7280"},children:[(0,o.jsx)(Y.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,o.jsx)("p",{className:"text-sm",children:"No image available"})]})})]})}var es=r(2127);r(9826);var el=r(8803);function en(e){let{onMenuClick:t,areaInfo:r,searchHistory:s,onSearch:l,searchTerm:n,setSearchTerm:i,filteredProjects:c=[],onProjectSelect:d,areaProject:f,areaProjects:u=[],mapZoom:p=11,isInSidebar:x=!1}=e,[h,g]=(0,a.useState)(!0),[m,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),{isDarkMode:v,toggleDarkMode:w}=(0,O.D)(),[k,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),A=(0,a.useRef)(),P=(0,a.useRef)(),L=(0,a.useRef)(),T=(0,a.useRef)(),I=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,o=e.scrollLeft,a=t-o,s=performance.now(),l=t=>{let n=Math.min((t-s)/r,1),i=1-Math.pow(1-n,3);e.scrollLeft=o+a*i,n<1&&requestAnimationFrame(l)};requestAnimationFrame(l)},z=()=>{if(L.current){let{scrollLeft:e,scrollWidth:t,clientWidth:r}=L.current;N(e>0),C(e<t-r-1)}};return(0,a.useEffect)(()=>{function e(e){e.target.closest(".dark-mode-btn")||!P.current||P.current.contains(e.target)||!A.current||A.current.contains(e.target)||g(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,a.useEffect)(()=>{if(L.current){let e=setTimeout(z,100);return()=>clearTimeout(e)}},[u,j]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{position:x?"relative":"absolute",top:x?"auto":20,left:x?"auto":50,zIndex:x?"auto":1e3,width:x?"100%":360,boxSizing:"border-box",display:"flex",alignItems:"center",fontFamily:"Inter, Arial, sans-serif"},className:"jsx-445a961fcf664118 search-container",children:(0,o.jsx)("div",{style:{flex:1},className:"jsx-445a961fcf664118",children:(0,o.jsx)("div",{style:{width:"100%",background:v?"#181c24":"#ffffff",borderRadius:14,boxShadow:v?"0 2px 12px rgba(0,0,0,0.13)":"0 2px 12px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",padding:"0 10px",minHeight:48,border:v?"1.5px solid #23293a":"1.5px solid #e0e0e0",boxSizing:"border-box"},className:"jsx-445a961fcf664118 searchbox",children:(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(n)},style:{display:"flex",alignItems:"center",width:"100%"},className:"jsx-445a961fcf664118 search-form",children:[(0,o.jsx)("label",{htmlFor:"search-input",style:{display:"none"},className:"jsx-445a961fcf664118",children:"Search Google Maps"}),(0,o.jsx)("input",{id:"search-input",ref:A,type:"text",placeholder:"Search...",autoComplete:"off",value:n,onChange:e=>i(e.target.value),onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),200),style:{border:"none",outline:"none",fontSize:17,width:"100%",background:"transparent",color:v?"#fff":"#000",padding:"12px 0",fontWeight:500,letterSpacing:.2},className:"jsx-445a961fcf664118"})]})})})}),(0,o.jsx)($.N,{children:!x&&p>=11&&u.length>0&&(0,o.jsxs)(Q.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeOut"},role:"region","aria-label":"".concat(u.length," projects in this area"),onMouseEnter:()=>{T.current&&clearTimeout(T.current),b(!0),y(!0)},onMouseLeave:()=>{b(!1),T.current=setTimeout(()=>{y(!1)},300)},style:{position:"fixed",top:20,left:426,zIndex:1e3,display:"flex",flexDirection:"row",alignItems:"center",overflowX:"auto",overflowY:"hidden",maxWidth:j?650:400,height:j?120:52,gap:j?16:8,padding:j?"16px 20px":"8px 12px",background:v?"linear-gradient(135deg, rgba(24, 28, 36, 0.95) 0%, rgba(35, 41, 58, 0.95) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 245, 245, 0.95) 100%)",borderRadius:j?20:14,border:v?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(0, 0, 0, 0.1)",boxShadow:j?v?"0 8px 32px rgba(0, 0, 0, 0.4), 0 4px 16px rgba(0, 0, 0, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.1), 0 4px 16px rgba(0, 0, 0, 0.05)":v?"0 4px 16px rgba(0, 0, 0, 0.3)":"0 4px 16px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",scrollbarWidth:"thin",scrollbarColor:v?"rgba(255, 255, 255, 0.3) transparent":"rgba(0, 0, 0, 0.3) transparent",opacity:m?1:.85,transition:"all 0.3s ease",pointerEvents:"auto"},children:[(0,o.jsx)($.N,{children:k&&j&&(0,o.jsx)(Q.P.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>{if(L.current){let e=Math.max(0,L.current.scrollLeft-200);I(L.current,e)}},"aria-label":"Scroll left",style:{position:"absolute",left:8,top:"40%",transform:"translateY(-50%)",zIndex:1002,width:32,height:32,background:"rgba(0, 255, 136, 0.9)",border:"none",borderRadius:"50%",color:"#000",fontSize:14,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.1,background:"rgba(0, 255, 136, 1)"},whileTap:{scale:.95},children:"‹"})}),(0,o.jsx)("div",{ref:L,onScroll:z,style:{display:"flex",flexDirection:"row",alignItems:"center",overflowX:"auto",overflowY:"hidden",scrollBehavior:"smooth",gap:j?16:8,padding:j?"16px 20px":"8px 12px",paddingLeft:k&&j?48:j?20:12,paddingRight:S&&j?48:j?20:12,width:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},className:"jsx-445a961fcf664118 hide-scrollbar",children:u.map((e,t)=>(0,o.jsxs)(Q.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t,duration:.2},whileHover:{scale:1.05,y:-2,transition:{duration:.2}},whileTap:{scale:.95},onClick:()=>d&&d(e),"aria-label":"Select project: ".concat(e.Name),style:{display:"flex",flexDirection:j?"column":"row",alignItems:"center",justifyContent:"center",background:v?"#23293a":"#f5f5f5",border:v?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:j?12:8,padding:j?"12px 16px":"6px 8px",minWidth:j?140:80,maxWidth:j?180:120,height:j?88:36,cursor:"pointer",color:v?"#ffffff":"#000000",fontSize:j?14:11,fontWeight:600,lineHeight:1.2,outline:"none",flexShrink:0,transition:"all 0.2s ease",gap:j?8:6},onMouseEnter:e=>{e.currentTarget.style.background="#00ff88",e.currentTarget.style.color="#000000",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(0, 255, 136, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background=v?"#23293a":"#f5f5f5",e.currentTarget.style.color=v?"#ffffff":"#000000",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,o.jsx)("img",{src:e.ImageUrl||e.imageUrl||"https://placehold.co/32x32/23293a/ffffff?text=P",alt:"",role:"presentation",style:{width:j?40:24,height:j?40:24,borderRadius:j?8:4,objectFit:"cover",border:"1px solid rgba(255, 255, 255, 0.2)",flexShrink:0},onError:e=>{e.currentTarget.src="https://placehold.co/32x32/23293a/ffffff?text=P"},className:"jsx-445a961fcf664118"}),(0,o.jsx)("span",{style:{fontSize:j?13:11,fontWeight:600,lineHeight:1.2,color:"inherit",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:j?"100%":"60px",textAlign:j?"center":"left"},className:"jsx-445a961fcf664118",children:e.Name})]},e.Name+t))}),(0,o.jsx)($.N,{children:S&&j&&(0,o.jsx)(Q.P.button,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},onClick:()=>{if(L.current){let e=Math.min(L.current.scrollWidth-L.current.clientWidth,L.current.scrollLeft+200);I(L.current,e)}},"aria-label":"Scroll right",style:{position:"absolute",right:8,top:"40%",transform:"translateY(-50%)",zIndex:1002,width:32,height:32,background:"rgba(0, 255, 136, 0.9)",border:"none",borderRadius:"50%",color:"#000",fontSize:14,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.1,background:"rgba(0, 255, 136, 1)"},whileTap:{scale:.95},children:"›"})})]})}),!x&&h&&(0,o.jsxs)("div",{ref:P,style:{position:"absolute",top:80,left:50,width:360,boxSizing:"border-box",background:v?"#181c24":"#ffffff",borderRadius:16,boxShadow:v?"0 8px 32px rgba(0,0,0,0.22)":"0 8px 32px rgba(0,0,0,0.1)",padding:12,zIndex:1001,border:v?"1.5px solid #23293a":"1.5px solid #e0e0e0",fontFamily:"Inter, Arial, sans-serif",transition:"opacity 0.18s, transform 0.18s",opacity:h?1:0,transform:h?"translateY(0)":"translateY(10px)",pointerEvents:h?"auto":"none"},className:"jsx-445a961fcf664118 search-dropdown",children:[n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{style:{color:"#00ff88",fontWeight:600,fontSize:13,letterSpacing:1},className:"jsx-445a961fcf664118",children:"Results"}),(0,o.jsxs)("ul",{style:{maxHeight:240,overflowY:"auto",margin:0,padding:0,listStyle:"none"},className:"jsx-445a961fcf664118",children:[0===c.length&&(0,o.jsx)("li",{style:{padding:8,color:v?"#888":"#666",fontSize:13},className:"jsx-445a961fcf664118",children:"No results"}),c.map((e,t)=>(0,o.jsxs)("li",{style:{cursor:"pointer",padding:"7px 8px",borderRadius:8,display:"flex",alignItems:"center",gap:10,transition:"background 0.18s",marginBottom:2},onMouseDown:()=>{d&&d(e),setTimeout(()=>g(!1),100)},onMouseEnter:e=>e.currentTarget.style.background=v?"#23293a":"#f5f5f5",onMouseLeave:e=>e.currentTarget.style.background="transparent",className:"jsx-445a961fcf664118",children:[(0,o.jsx)("img",{src:e.ImageUrl||e.imageUrl||"https://placehold.co/32x32",alt:e.Name,style:{width:32,height:32,borderRadius:7,objectFit:"cover",flexShrink:0,border:"1px solid #23293a",background:"#23293a"},className:"jsx-445a961fcf664118"}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},className:"jsx-445a961fcf664118",children:[(0,o.jsx)("span",{style:{fontWeight:500,color:v?"#fff":"#000",fontSize:15,lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-445a961fcf664118",children:e.Name}),(0,o.jsx)("span",{style:{fontSize:12,color:v?"#b0b0b0":"#666",lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:1},className:"jsx-445a961fcf664118",children:e.DescriptionShort})]})]},t))]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-445a961fcf664118",children:[(0,o.jsx)("strong",{style:{color:"#00ff88",fontWeight:600,fontSize:13,letterSpacing:1},className:"jsx-445a961fcf664118",children:"Recent Searches"}),(0,o.jsx)("button",{"aria-label":v?"Switch to light mode":"Switch to dark mode",onClick:w,style:{background:"none",border:"none",color:"#00ff88",fontSize:16,width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:8,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background=v?"#23293a":"#f5f5f5",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.background="none",e.currentTarget.style.transform="scale(1)"},className:"jsx-445a961fcf664118 dark-mode-btn",children:v?"☀️":"\uD83C\uDF19"})]}),(0,o.jsx)("ul",{style:{fontSize:13},className:"jsx-445a961fcf664118",children:s.map((e,t)=>(0,o.jsx)("li",{className:"jsx-445a961fcf664118",children:e},t))}),(0,o.jsxs)("div",{style:{marginTop:12,borderTop:v?"1px solid #23293a":"1px solid #e0e0e0",paddingTop:8},className:"jsx-445a961fcf664118",children:[(0,o.jsx)("strong",{style:{color:"#00ff88",fontWeight:600,fontSize:13,letterSpacing:1},className:"jsx-445a961fcf664118",children:"This Area"}),f?(0,o.jsxs)("div",{style:{marginTop:6,background:v?"#23293a":"#f5f5f5",borderRadius:10,padding:"10px 12px",color:v?"#fff":"#000",cursor:"pointer",fontSize:15,fontWeight:500,boxShadow:v?"0 2px 8px rgba(0,0,0,0.10)":"0 2px 8px rgba(0,0,0,0.05)",transition:"background 0.18s",display:"flex",alignItems:"center",gap:10},onMouseDown:()=>d&&d(f),onMouseEnter:e=>e.currentTarget.style.background="#00ff88",onMouseLeave:e=>e.currentTarget.style.background=v?"#23293a":"#f5f5f5",className:"jsx-445a961fcf664118",children:[(0,o.jsx)("img",{src:f.ImageUrl||f.imageUrl||"https://placehold.co/32x32",alt:f.Name,style:{width:32,height:32,borderRadius:7,objectFit:"cover",flexShrink:0,border:"1px solid #23293a",background:"#23293a"},className:"jsx-445a961fcf664118"}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},className:"jsx-445a961fcf664118",children:[(0,o.jsx)("span",{style:{fontWeight:500,color:v?"#fff":"#000",fontSize:15,lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-445a961fcf664118",children:f.Name}),f.DescriptionShort&&(0,o.jsx)("div",{style:{fontSize:13,color:v?"#b0b0b0":"#666",fontWeight:400,marginTop:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-445a961fcf664118",children:f.DescriptionShort})]})]}):(0,o.jsx)("div",{style:{color:v?"#b0b0b0":"#666",fontSize:13,marginTop:6},className:"jsx-445a961fcf664118",children:r})]})]}),(0,o.jsx)("div",{style:{marginTop:12,borderTop:v?"1px solid #23293a":"1px solid #e0e0e0",paddingTop:8},className:"jsx-445a961fcf664118",children:(0,o.jsx)("button",{onClick:t,style:{marginTop:8,width:"100%",background:v?"#23293a":"#f5f5f5",color:"#00ff88",border:"none",borderRadius:7,padding:"10px 0",fontWeight:600,fontSize:15,letterSpacing:1,cursor:"pointer",transition:"background 0.18s"},onMouseEnter:e=>e.currentTarget.style.background="#00ff88",onMouseLeave:e=>e.currentTarget.style.background=v?"#23293a":"#f5f5f5",className:"jsx-445a961fcf664118",children:"▼ Open Sidebar"})})]}),(0,o.jsx)(el,{id:"445a961fcf664118",children:".hide-scrollbar.jsx-445a961fcf664118::-webkit-scrollbar{display:none}.hide-scrollbar.jsx-445a961fcf664118{-ms-overflow-style:none;scrollbar-width:none}"})]})}let ei=[32.2217,-110.9265],ec=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color: #e74c3c; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[12,12],iconAnchor:[6,6],popupAnchor:[0,-5]}),ed=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color:rgb(0, 255, 247); width: 16px; height: 16px; border-radius: 50%; border: 3px solid blue; box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);"></div>',iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-5]});function ef(e){let{open:t,onClose:r,searchTerm:a,setSearchTerm:l,filteredProjects:n,searchFilteredProjects:i,onSelectCategory:c,selectedCategory:d,markerRefs:f,categories:u}=e,p=(0,s.ko)();return(0,o.jsx)(_,{open:t,onClose:r,searchTerm:a,setSearchTerm:l,filteredProjects:n,searchFilteredProjects:i,onSelectCategory:c,selectedCategory:d,markerRefs:f,categories:u,onProjectClick:(e,t)=>{let r="".concat(e.Name,"-").concat(t),o=parseFloat(e.Latitude),a=parseFloat(e.Longitude);isNaN(o)||isNaN(a)?console.error("Invalid coordinates:",o,a):(null==f?void 0:f.current[r])?(p.flyTo([o,a],13,{animate:!0}),f.current[r].openPopup()):console.warn('Marker for key "'.concat(r,'" not found.'))}})}function eu(e){let{filteredProjects:t,setAreaInfo:r,setAreaProject:o,setAreaProjects:l,setMapZoom:n}=e,i=(0,s.Po)({moveend:c,zoomend:c});function c(){let e=i.getZoom();if(e<12){r("Zoom in to see projects in this area"),o(null),l([]),n(e);return}let a=i.getBounds(),s=t.filter(e=>a.contains([e.Latitude,e.Longitude]));if(0===s.length)r("No projects in this area"),o(null),l([]),n(11);else{let t=s[0];r("".concat(t.Name).concat(t.DescriptionShort?": "+t.DescriptionShort:"")),o(t),l(s),n(e)}}return(0,a.useEffect)(()=>{c()},[t]),null}function ep(){let{projects:e,filteredProjects:t,filterProjects:r,categories:s}=function(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(""),[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready_v2.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();t(r);let o=[...new Set(r.map(e=>e.ProjectCategory).filter(Boolean))];console.log("Found categories in data:",o);let a={ArtExhibition:"Art Exhibition",Research:"Research",CommunityEngagement:"Community Engagement",Performance:"Performance",Workshop:"Workshop",Conference:"Conference",Publication:"Publication",Other:"Other"},s=o.map(e=>({Value:e,Label:a[e]||e}));console.log("Processed categories:",s),l(s)}catch(e){console.error("Error fetching data:",e),i(e.message)}})()},[]);let c=(0,a.useMemo)(()=>r?e.filter(e=>e.ProjectCategory===r):e,[e,r]),d=(0,a.useCallback)(e=>{o(e)},[]),f=(0,a.useCallback)(()=>e.filter(e=>e.Artworks&&e.Artworks.length>0),[e]),u=(0,a.useCallback)(()=>e.filter(e=>e.Poems&&e.Poems.length>0),[e]),p=(0,a.useCallback)(()=>{let t=new Set;return e.forEach(e=>{e.Activities&&e.Activities.forEach(e=>{t.add(e)})}),Array.from(t)},[e]);return{projects:e,filteredProjects:c,categories:s,error:n,filterProjects:d,getProjectsWithArtworks:f,getProjectsWithPoems:u,getUniqueActivities:p}}(),[c,d]=(0,a.useState)(""),[f,u]=(0,a.useState)(null),[p,x]=(0,a.useState)(!1),h=(0,a.useRef)({});(0,a.useRef)(null);let[g,m]=(0,a.useState)(null),{isDarkMode:b}=(0,O.D)(),[j,y]=(0,a.useState)(!1),[v,w]=(0,a.useState)(""),[k,N]=(0,a.useState)([]),[S,C]=(0,a.useState)(""),[A,P]=(0,a.useState)(null),[L,T]=(0,a.useState)([]),[I,z]=(0,a.useState)(11),D=t.filter(e=>{var t,r,o;if(!v)return!0;let a=v.toLowerCase();return(null===(t=e.Name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(r=e.DescriptionShort)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(o=e.Description)||void 0===o?void 0:o.toLowerCase().includes(a))});(0,a.useRef)(window.location.hash);let E=(0,a.useCallback)(e=>{u(e),x(!0),window.location.hash="project=".concat(encodeURIComponent(e.Name),"&lat=").concat(e.Latitude,"&lng=").concat(e.Longitude)},[]),M=(0,a.useCallback)(()=>{x(!1),u(null);let e=new URLSearchParams(window.location.hash.slice(1));e.has("project")&&(e.delete("project"),e.delete("lat"),e.delete("lng"),window.location.hash=e.toString())},[]);(0,a.useCallback)(e=>{let t=new URLSearchParams(window.location.hash.slice(1));e?t.set("category",encodeURIComponent(e)):t.delete("category");let r=t.toString();window.location.hash.slice(1)!==r&&(window.location.hash=r)},[]);let R=(0,a.useCallback)((e,t,r)=>{Object.values(h.current).forEach(e=>{e&&e.setIcon(ec)}),e.setIcon(ed),m(e),new URLSearchParams(window.location.hash.slice(1)).get("selected")!==t.Name&&(window.location.hash="selected=".concat(encodeURIComponent(t.Name)));let o=e._map.getZoom();e._map.flyTo([t.Latitude,t.Longitude],o,{animate:!0})},[h]);return(0,a.useEffect)(()=>{let e=()=>{d(e=>{let t=new URLSearchParams(window.location.hash.slice(1)).get("category")||"";return t!==e?t:e})};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]),(0,a.useEffect)(()=>{r(c)},[c,r]),(0,a.useEffect)(()=>{if(!t)return;let e=()=>{let e=new URLSearchParams(window.location.hash.slice(1)),r=e.get("project"),o=e.get("selected");if(r){let e=decodeURIComponent(r),o=t.find(t=>t.Name===e);o&&(!f||f.Name!==o.Name)&&(u(o),x(!0))}else p&&(x(!1),u(null));if(o){let e=decodeURIComponent(o),r=t.find(t=>t.Name===e);if(r){let e=t.indexOf(r),o="".concat(r.Name,"-").concat(e),a=h.current[o];a&&g!==a&&(Object.values(h.current).forEach(e=>{e&&e.setIcon(ec)}),a.setIcon(ed),m(a))}}else g&&(g.setIcon(ec),m(null))};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[t,p,f,g,h]),(0,a.useEffect)(()=>{document.querySelectorAll(".leaflet-popup").forEach(e=>{b?(e.classList.remove("light-mode-popup"),e.classList.add("dark-mode-popup")):(e.classList.remove("dark-mode-popup"),e.classList.add("light-mode-popup"))})},[b]),(0,a.useEffect)(()=>{t&&t.forEach((e,t)=>{let r="".concat(e.Name,"-").concat(t),o=h.current[r];if(o){let r=document.createElement("div");r.className="responsive-popup-content",r.innerHTML='\n            <img \n              src="'.concat(e.ImageUrl||"https://via.placeholder.com/150",'" \n              alt="').concat(e.Name,'" \n              class="popup-image" \n            />\n            <strong class="popup-title">').concat(e.Name,'</strong>\n            <p class="popup-description">').concat(e.DescriptionShort||e.Description||"",'</p>\n            <button id="more-details-').concat(t,'" class="popup-button">\n              More Details\n            </button>\n        ');let a=es.L({hasTip:!1,autoPan:!0,className:b?"dark-mode-popup":"light-mode-popup"}).setContent(r);o.bindPopup(a),o.on("click",()=>{R(o,e,t)}),o.on("popupopen",()=>{R(o,e,t)}),o.on("popupclose",()=>{let e=new URLSearchParams(window.location.hash.slice(1));e.has("selected")&&(e.delete("selected"),window.location.hash=e.toString()),o.setIcon(ec),m(null)});let s=r.querySelector("#more-details-".concat(t));s&&s.addEventListener("click",()=>{E(e)})}})},[t,b,E,R]),(0,o.jsxs)("div",{style:{position:"relative",height:"100vh",width:"100%"},children:[(0,o.jsx)(en,{searchTerm:v,setSearchTerm:w,onMenuClick:()=>y(!0),areaInfo:S,areaProject:A,areaProjects:L,mapZoom:I,searchHistory:k,onSearch:e=>{w(e),e&&!k.includes(e)&&N([e,...k.slice(0,9)])},filteredProjects:D,onProjectSelect:e=>{let r=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),o="".concat(e.Name,"-").concat(r);!isNaN(e.Latitude)&&!isNaN(e.Longitude)&&(null==h?void 0:h.current[o])&&(h.current[o]._map.flyTo([e.Latitude,e.Longitude],13,{animate:!0}),h.current[o].openPopup()),y(!1)}}),(0,o.jsxs)(l.W,{center:ei,zoom:11,style:{height:"100vh",width:"100%"},children:[(0,o.jsx)(eu,{filteredProjects:t,setAreaInfo:C,setAreaProject:P,setAreaProjects:T,setMapZoom:z}),(0,o.jsx)(n.e,{url:b?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',minZoom:0,maxZoom:20}),null==t?void 0:t.map((e,t)=>{let r="".concat(e.Name,"-").concat(t);return(0,o.jsx)(i.p,{position:[e.Latitude,e.Longitude],icon:ec,ref:e=>{e&&(h.current[r]=e)}},r)}),j&&(0,o.jsx)(ef,{open:j,onClose:()=>y(!1),searchTerm:v,setSearchTerm:w,filteredProjects:t,searchFilteredProjects:D,onSelectCategory:d,selectedCategory:c,markerRefs:h,categories:s})]}),(0,o.jsx)("div",{className:"map-color-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%",background:"rgba(192, 128, 248, 0.1)",pointerEvents:"none",zIndex:400}}),f&&(0,o.jsx)(ea,{project:f,onClose:M})]})}},9388:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,DarkModeProvider:()=>l});var o=r(5155),a=r(2115);let s=(0,a.createContext)();function l(e){let{children:t}=e,[r,l]=(0,a.useState)(!0);return(0,o.jsx)(s.Provider,{value:{isDarkMode:r,toggleDarkMode:()=>l(e=>!e)},children:t})}function n(){return(0,a.useContext)(s)}}}]);