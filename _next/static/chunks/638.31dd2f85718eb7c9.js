(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[638],{2427:()=>{},4638:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>ee});var r=o(5155),a=o(2115),s=o(6756),l=o(833),n=o(5402),i=o(3710),c=o(8741);o(8413);var d=o(9579),f=o(5436),u=o(9561),p=o(894),h=o(2241),x=o(152),m=o(1441),g=o(4918),b=o(1983),y=o(6017),j=o(391),v=o(1837),w=o(8205),N=o(2678),k=o(507),S=o(5787),C=o(7508);function A(e){let{categories:t=[],onSelectCategory:o,selectedCategory:s}=e,[l,n]=(0,a.useState)(!1);return console.log("ProjectDropdown received categories:",t),console.log("ProjectDropdown selectedCategory:",s),(0,r.jsx)(f.A,{sx:{minWidth:120},children:(0,r.jsxs)(N.A,{fullWidth:!0,children:[(0,r.jsx)(k.A,{id:"category-select-label",children:"Category"}),(0,r.jsxs)(S.A,{labelId:"category-select-label",id:"category-select",open:l,onClose:()=>n(!1),onOpen:()=>n(!0),value:s||"",label:"Category",onChange:e=>{o(e.target.value)},children:[(0,r.jsx)(C.A,{value:"",children:"All Projects"}),t.map((e,t)=>(0,r.jsx)(C.A,{value:e.Value||e.value,children:e.Label||e.label||e.Value||e.value},e.Value||e.value||"category-".concat(t)))]})]})})}var L=o(9388);function P(e){let{filteredProjects:t,searchFilteredProjects:o,onSelectCategory:s,selectedCategory:l,markerRefs:n,categories:i=[],open:c,onClose:N,searchTerm:k,setSearchTerm:S,onProjectClick:C}=e,[P,T]=(0,a.useState)(!0),{isDarkMode:I,toggleDarkMode:E}=(0,L.D)();return(0,a.useEffect)(()=>{document.body.classList.toggle("dark-mode",I)},[I]),console.log("Filtered Projects:",t),console.log("Selected Category:",l),(0,r.jsx)("div",{style:{position:"relative",height:"100%"},children:(0,r.jsxs)(d.Ay,{anchor:P?"left":"right",open:c,onClose:N,variant:"temporary",PaperProps:{sx:{width:404,background:I?"linear-gradient(135deg, #1a1a1a 0%, #23293a 100%)":"linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%)",color:I?"#00ff88":"#333333",borderRight:P?"4px solid #00ff88":"none",borderLeft:P?"none":"4px solid #00ff88",boxShadow:I?"0 0 20px #00ff88, 0 4px 12px #000":"0 0 20px rgba(0, 255, 136, 0.3), 0 4px 12px rgba(0, 0, 0, 0.1)",filter:I?"drop-shadow(0 0 10px #00ff88)":"drop-shadow(0 0 10px rgba(0, 255, 136, 0.2))",transition:"background 0.3s, color 0.3s, box-shadow 0.3s, border 0.3s"}},children:[(0,r.jsxs)(f.A,{sx:{display:"flex",alignItems:"center",p:1,color:I?"#00ff88":"#333333"},children:[(0,r.jsx)(u.A,{variant:"h6",sx:{color:"inherit"},children:"Projects"}),(0,r.jsx)(p.A,{onClick:N,sx:{color:"inherit"},children:(0,r.jsx)(v.A,{})})]}),(0,r.jsx)(h.A,{sx:{backgroundColor:I?"rgba(0, 255, 136, 0.3)":"rgba(0, 0, 0, 0.1)"}}),(0,r.jsx)(f.A,{sx:{p:2},children:(0,r.jsx)(x.A,{fullWidth:!0,variant:"outlined",placeholder:"Search projects...",value:k,onChange:e=>{S(e.target.value)},sx:{"& .MuiOutlinedInput-root":{backgroundColor:I?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",color:I?"#ffffff":"#333333","& fieldset":{borderColor:I?"rgba(0, 255, 136, 0.3)":"rgba(0, 0, 0, 0.2)"},"&:hover fieldset":{borderColor:I?"rgba(0, 255, 136, 0.5)":"rgba(0, 0, 0, 0.3)"},"&.Mui-focused fieldset":{borderColor:"#00ff88"}},"& .MuiInputBase-input":{color:I?"#ffffff":"#333333"},"& .MuiInputAdornment-root":{color:I?"rgba(0, 255, 136, 0.7)":"rgba(0, 0, 0, 0.5)"}},InputProps:{startAdornment:(0,r.jsx)(m.A,{position:"start",children:(0,r.jsx)(w.A,{})})}})}),(0,r.jsx)(f.A,{sx:{p:2},children:(0,r.jsx)(A,{onSelectCategory:s,selectedCategory:l,categories:i})}),(0,r.jsx)(g.A,{sx:{backgroundColor:I?"rgba(255, 255, 255, 0.02)":"rgba(0, 0, 0, 0.01)"},children:null==o?void 0:o.map(e=>{let o=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),a="".concat(e.Name,"-").concat(o,"-").concat(e.Latitude,"-").concat(e.Longitude);return(0,r.jsx)(b.Ay,{disablePadding:!0,children:(0,r.jsx)(y.A,{onClick:()=>C(e,o),sx:{color:I?"#ffffff":"#333333","&:hover":{backgroundColor:I?"rgba(0, 255, 136, 0.1)":"rgba(0, 255, 136, 0.05)"},"& .MuiListItemText-primary":{color:"inherit"},"& .MuiListItemText-secondary":{color:I?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)"}},children:(0,r.jsx)(j.A,{primary:e.Name,secondary:e.DescriptionShort})})},a)})})]})})}o(2427);var T=o(8617),I=o(9928),E=o(3467),D=o(2423),R=o(5765),M=o(8058),z=o(767),U=o(3518),W=o(6967),F=o(9124),H=o(5683),O=o(9191),_=o(1556);function B(e){let{poems:t,selectedPoem:o,setSelectedPoem:a,isAnimating:s,startAnimation:l,resetAnimation:n}=e,{isDarkMode:i}=(0,L.D)();return t&&0!==t.length?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm mb-3",style:{color:i?"#ffffff":"#111827"},children:"Select a Poem"}),(0,r.jsx)("div",{className:"grid gap-2",children:t.map((e,t)=>(0,r.jsxs)(F.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(t),className:"text-left p-3 rounded-lg transition-all duration-200",style:{backgroundColor:o===t?i?"rgba(30, 58, 138, 0.3)":"rgba(59, 130, 246, 0.1)":i?"rgba(31, 41, 55, 0.5)":"rgba(243, 244, 246, 0.8)",border:o===t?i?"1px solid rgba(59, 130, 246, 0.5)":"1px solid rgba(59, 130, 246, 0.3)":"1px solid transparent",color:o===t?i?"#ffffff":"#111827":i?"#d1d5db":"#6b7280","&:hover":{backgroundColor:o===t?i?"rgba(30, 58, 138, 0.3)":"rgba(59, 130, 246, 0.1)":i?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.8)",color:i?"#ffffff":"#111827"}},children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:e.Title}),(0,r.jsx)("div",{className:"text-xs mt-1",style:{color:i?"#9ca3af":"#6b7280"},children:e.Author}),e.location&&(0,r.jsx)("div",{className:"text-xs mt-1",style:{color:"#3b82f6"},children:e.location})]},t))})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(F.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,disabled:s,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:s?i?"#4b5563":"#9ca3af":"#3b82f6",color:"#ffffff","&:hover":{backgroundColor:s?i?"#4b5563":"#9ca3af":"#2563eb"}},children:[(0,r.jsx)(O.A,{className:"w-4 h-4"}),s?"Playing...":"Animate"]}),(0,r.jsxs)(F.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",style:{backgroundColor:i?"#4b5563":"#6b7280",color:"#ffffff","&:hover":{backgroundColor:i?"#374151":"#4b5563"}},children:[(0,r.jsx)(_.A,{className:"w-4 h-4"}),"Reset"]})]})]}):(0,r.jsxs)("div",{className:"italic text-center py-8",style:{color:i?"#9ca3af":"#6b7280"},children:[(0,r.jsx)(E.A,{className:"w-8 h-8 mx-auto mb-2 opacity-60"}),"No poems available for this project."]})}function Y(e){var t,o;let{poem:s,completedLines:l,currentLineIndex:n}=e,{isDarkMode:i}=(0,L.D)();if(!s)return null;let c=(null===(o=s.Content)||void 0===o?void 0:null===(t=o.split("\n"))||void 0===t?void 0:t.filter(e=>e.trim()))||[],d=e=>{let{text:t,isActive:o,isComplete:s,delay:l=0}=e,[n,c]=a.useState("");return(0,a.useEffect)(()=>{if(!o){s?c(t):c("");return}let e=0,r=setInterval(()=>{c(t.slice(0,e+1)),++e>=t.length&&clearInterval(r)},50+30*Math.random());return()=>clearInterval(r)},[o,t,s]),(0,r.jsxs)(F.P.div,{initial:{opacity:0,y:10},animate:{opacity:o||s?1:.3,y:o||s?0:10},transition:{duration:.5,delay:l},className:"leading-relaxed",style:{color:o?"#93c5fd":s?i?"#d1d5db":"#374151":i?"#6b7280":"#9ca3af"},children:[n,o&&n.length<t.length&&(0,r.jsx)(F.P.span,{animate:{opacity:[1,0]},transition:{duration:.8,repeat:1/0,repeatType:"reverse"},style:{color:"#60a5fa"},children:"|"})]})};return(0,r.jsx)(H.N,{mode:"wait",children:(0,r.jsxs)(F.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 pl-4 py-2",style:{borderColor:"#3b82f6"},children:[(0,r.jsx)(F.P.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-xl font-bold mb-1",style:{color:i?"#ffffff":"#111827"},children:null==s?void 0:s.Title}),(null==s?void 0:s.Author)&&(0,r.jsxs)(F.P.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"text-sm",style:{color:i?"#9ca3af":"#6b7280"},children:["by ",s.Author]}),(null==s?void 0:s.location)&&(0,r.jsxs)(F.P.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"text-xs mt-1",style:{color:"#3b82f6"},children:["\uD83D\uDCCD ",s.location]})]}),(0,r.jsx)(F.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"rounded-lg p-6 border",style:{backgroundColor:i?"rgba(17, 24, 39, 0.5)":"rgba(249, 250, 251, 0.8)",borderColor:i?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.8)"},children:(0,r.jsx)("div",{className:"space-y-3 text-base font-mono",children:c.map((e,t)=>(0,r.jsx)(d,{text:e,isActive:n===t,isComplete:l.includes(t),delay:.1*t},"".concat(s.Title,"-").concat(t)))})})]},s.Title)})}function Z(e){var t,o,s,l,n,i,c,d;let{project:f,onClose:u}=e,[p,h]=(0,a.useState)(0),[x,m]=(0,a.useState)([]),[g,b]=(0,a.useState)(0),{isDarkMode:y}=(0,L.D)(),[j,v]=(0,a.useState)(0),[w,N]=(0,a.useState)(!1),[k,S]=(0,a.useState)([]),[C,A]=(0,a.useState)(-1),P=()=>{var e,t;if(!f.Poems||!f.Poems[j])return;let o=(null===(t=f.Poems[j].Content)||void 0===t?void 0:null===(e=t.split("\n"))||void 0===e?void 0:e.filter(e=>e.trim()))||[];N(!0),S([]),A(-1),o.forEach((e,t)=>{setTimeout(()=>{A(t),setTimeout(()=>{S(e=>[...e,t]),t===o.length-1&&(N(!1),A(-1))},2e3+50*e.length)},3e3*t)})},F=()=>{N(!1),S([]),A(-1)};if((0,a.useEffect)(()=>{if(!f)return;let e=[];f.ImageUrl&&e.push({src:f.ImageUrl,title:f.Name,type:"project"}),f.Artworks&&f.Artworks.length>0&&f.Artworks.forEach(t=>{t.ImageUrl&&e.push({src:t.ImageUrl,title:t.Title,type:"artwork",description:t.Description})}),m(e)},[f]),!f)return null;let H=[{label:"Overview",icon:T.A,content:"overview"},...f.HasArtwork&&(null===(t=f.Artworks)||void 0===t?void 0:t.length)>0?[{label:"Artworks",icon:I.A,content:"artworks",count:f.Artworks.length}]:[],...f.HasPoems&&(null===(o=f.Poems)||void 0===o?void 0:o.length)>0?[{label:"Poems",icon:E.A,content:"poems",count:f.Poems.length}]:[],...(null===(s=f.Activities)||void 0===s?void 0:s.length)>0?[{label:"Activities",icon:D.A,content:"activities",count:f.Activities.length}]:[],...(null===(l=f.relatedUrls)||void 0===l?void 0:l.length)>0?[{label:"Links",icon:R.A,content:"links",count:f.relatedUrls.length}]:[]],O=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[f.ImageUrl&&(0,r.jsx)("div",{className:"mb-4 flex justify-center",children:(0,r.jsx)("img",{src:f.ImageUrl,alt:f.Name,className:"rounded-lg shadow-lg max-w-full max-h-56 object-contain border",style:{width:"100%",maxWidth:320,borderColor:y?"#374151":"#e5e7eb",backgroundColor:y?"#000000":"#ffffff"}})}),(f.DescriptionLong||f.DescriptionShort)&&(0,r.jsxs)("section",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",style:{color:y?"#ffffff":"#111827"},children:"Description"}),(0,r.jsx)("p",{className:"text-lg leading-relaxed",style:{color:y?"#d1d5db":"#374151"},children:f.DescriptionLong||f.DescriptionShort})]}),f.Background&&(0,r.jsxs)("section",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",style:{color:y?"#ffffff":"#111827"},children:"Background"}),(0,r.jsx)("p",{className:"text-lg leading-relaxed",style:{color:y?"#d1d5db":"#374151"},children:f.Background})]})]}),_=()=>{var e;return(0,r.jsx)("div",{className:"space-y-3",children:null===(e=f.Artworks)||void 0===e?void 0:e.map((e,t)=>(0,r.jsxs)("div",{className:"group flex items-start gap-3 p-2 rounded-lg cursor-pointer transition-colors",style:{backgroundColor:"transparent","&:hover":{backgroundColor:y?"#374151":"#f3f4f6"}},onClick:()=>b(t+(f.ImageUrl?1:0)),children:[e.ImageUrl&&(0,r.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,r.jsx)("img",{src:e.ImageUrl,alt:e.Title,className:"w-12 h-12 object-cover rounded"}),(0,r.jsx)("div",{className:"absolute inset-0 rounded transition-colors flex items-center justify-center",style:{backgroundColor:"rgba(0, 0, 0, 0)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:(0,r.jsx)(M.A,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("h4",{className:"text-base font-medium mb-1 break-words",style:{color:y?"#ffffff":"#111827"},children:e.Title}),(0,r.jsx)("p",{className:"text-sm leading-relaxed break-words whitespace-pre-line",style:{color:y?"#d1d5db":"#6b7280"},children:e.DescriptionLong||e.Description})]})]},t))})},Z=()=>(0,r.jsx)(B,{poems:f.Poems||[],selectedPoem:j,setSelectedPoem:e=>{v(e),F()},isAnimating:w,startAnimation:P,resetAnimation:F}),q=()=>{var e;return(0,r.jsx)("div",{className:"space-y-3",children:null===(e=f.Activities)||void 0===e?void 0:e.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:y?"#374151":"#f3f4f6"},children:[(0,r.jsx)("h4",{className:"font-medium text-sm mb-1",style:{color:y?"#ffffff":"#111827"},children:e.Title}),(0,r.jsx)("p",{className:"text-sm mb-2",style:{color:y?"#d1d5db":"#6b7280"},children:e.Description}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[e.Date&&(0,r.jsx)("span",{className:"text-xs",style:{color:y?"#9ca3af":"#6b7280"},children:e.Date}),e.Link&&(0,r.jsxs)("a",{href:e.Link,target:"_blank",rel:"noopener noreferrer",className:"text-xs flex items-center gap-1",style:{color:"#3b82f6","&:hover":{color:"#60a5fa"}},children:["Learn More ",(0,r.jsx)(R.A,{className:"w-3 h-3"})]})]})]},t))})},V=()=>{var e;return(0,r.jsx)("div",{className:"space-y-2",children:null===(e=f.relatedUrls)||void 0===e?void 0:e.map((e,t)=>(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg transition-colors text-sm",style:{color:y?"#d1d5db":"#6b7280","&:hover":{backgroundColor:y?"#374151":"#f3f4f6",color:y?"#ffffff":"#111827"}},children:[(0,r.jsx)(R.A,{className:"w-4 h-4"}),e.title]},t))})},X=x[g]||x[0];return(0,r.jsxs)("div",{className:"h-screen w-screen grid grid-cols-[420px_1fr] fixed top-0 left-0 z-[2000]",style:{backgroundColor:y?"#111827":"#ffffff"},children:[(0,r.jsxs)("div",{className:"border-r flex flex-col min-w-0",style:{width:420,backgroundColor:y?"#111827":"#f9fafb",borderColor:y?"#374151":"#e5e7eb"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:y?"#374151":"#e5e7eb"},children:[(0,r.jsx)("h1",{className:"font-bold text-2xl truncate pr-2",style:{color:y?"#ffffff":"#111827"},children:f.Name}),(0,r.jsx)("button",{onClick:u,className:"p-2 rounded-lg transition-colors",style:{color:y?"#9ca3af":"#6b7280","&:hover":{backgroundColor:y?"#374151":"#f3f4f6"}},children:(0,r.jsx)(z.A,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"flex overflow-x-auto scrollbar-hide border-b",style:{borderColor:y?"#374151":"#e5e7eb"},children:H.map((e,t)=>{let o=e.icon;return(0,r.jsxs)("button",{onClick:()=>h(t),className:"flex items-center gap-2 px-4 py-3 text-base font-semibold border-b-2 transition-colors whitespace-nowrap",style:{color:p===t?"#3b82f6":y?"#d1d5db":"#6b7280",borderBottomColor:p===t?"#3b82f6":"transparent",backgroundColor:p===t?y?"#374151":"#f3f4f6":"transparent","&:hover":{color:p===t?"#3b82f6":"#60a5fa"}},children:[(0,r.jsx)(o,{className:"w-5 h-5"}),e.label,e.count&&(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:y?"#4b5563":"#e5e7eb",color:y?"#d1d5db":"#374151"},children:e.count})]},e.label)})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",style:{maxHeight:"calc(100vh - 112px)"},children:(null===(n=H[p])||void 0===n?void 0:n.content)==="poems"?Z():(()=>{var e;switch(null===(e=H[p])||void 0===e?void 0:e.content){case"overview":return O();case"artworks":return _();case"poems":return Z();case"activities":return q();case"links":return V();default:return null}})()})]}),(0,r.jsx)("div",{className:"flex items-center justify-center relative",style:{backgroundColor:y?"#000000":"#f9fafb"},children:(null===(i=H[p])||void 0===i?void 0:i.content)==="overview"?f.ImageUrl?(0,r.jsx)("img",{src:f.ImageUrl,alt:f.Name,className:"max-h-[70vh] max-w-full object-contain rounded-lg shadow-lg border",style:{width:"100%",maxWidth:600,borderColor:y?"#374151":"#e5e7eb",backgroundColor:y?"#000000":"#ffffff"}}):(0,r.jsxs)("div",{className:"text-center",style:{color:y?"#9ca3af":"#6b7280"},children:[(0,r.jsx)(I.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No image available"})]}):(null===(c=H[p])||void 0===c?void 0:c.content)==="poems"?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{minHeight:"60vh"},children:(0,r.jsx)("div",{className:"w-full max-w-2xl mx-auto p-8 rounded-2xl shadow-2xl border",style:{borderColor:y?"#1e3a8a":"#dbeafe",background:y?"linear-gradient(135deg, #181c24 0%, #1e2233 50%, #23293a 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%)",opacity:.9},children:(0,r.jsx)(Y,{poem:null===(d=f.Poems)||void 0===d?void 0:d[j],completedLines:k,currentLineIndex:C})})}):X?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:X.src,alt:X.title,className:"max-h-full max-w-full object-contain"}),(0,r.jsx)("div",{className:"absolute top-4 right-4 backdrop-blur-sm rounded-lg px-2 py-1",style:{backgroundColor:y?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.8)"},children:(0,r.jsxs)("span",{className:"text-xs",style:{color:y?"#ffffff":"#111827"},children:[g+1," / ",x.length]})}),x.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>b((g-1+x.length)%x.length),className:"absolute left-4 top-1/2 -translate-y-1/2 backdrop-blur-sm p-2 rounded-lg transition-colors",style:{backgroundColor:y?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.8)"},children:(0,r.jsx)(U.A,{className:"w-5 h-5",style:{color:y?"#ffffff":"#111827"}})}),(0,r.jsx)("button",{onClick:()=>b((g+1)%x.length),className:"absolute right-4 top-1/2 -translate-y-1/2 backdrop-blur-sm p-2 rounded-lg transition-colors",style:{backgroundColor:y?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.8)"},children:(0,r.jsx)(W.A,{className:"w-5 h-5",style:{color:y?"#ffffff":"#111827"}})})]})]}):(0,r.jsxs)("div",{className:"text-center",style:{color:y?"#9ca3af":"#6b7280"},children:[(0,r.jsx)(I.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No image available"})]})})]})}var q=o(2127);o(9826);var V=o(8803);function X(e){let{onMenuClick:t,areaInfo:o,searchHistory:s,onSearch:l,searchTerm:n,setSearchTerm:i,filteredProjects:c=[],onProjectSelect:d,areaProject:f,areaProjects:u=[],mapZoom:p=11}=e,[h,x]=(0,a.useState)(!0),[m,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),{isDarkMode:j,toggleDarkMode:v}=(0,L.D)(),[w,N]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),C=(0,a.useRef)(),A=(0,a.useRef)(),P=(0,a.useRef)(),T=(0,a.useRef)(),I=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=e.scrollLeft,a=t-r,s=performance.now(),l=t=>{let n=Math.min((t-s)/o,1),i=1-Math.pow(1-n,3);e.scrollLeft=r+a*i,n<1&&requestAnimationFrame(l)};requestAnimationFrame(l)},E=()=>{if(P.current){let{scrollLeft:e,scrollWidth:t,clientWidth:o}=P.current;N(e>0),S(e<t-o-1)}};return(0,a.useEffect)(()=>{function e(e){e.target.closest(".dark-mode-btn")||!A.current||A.current.contains(e.target)||!C.current||C.current.contains(e.target)||x(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,a.useEffect)(()=>{if(P.current){let e=setTimeout(E,100);return()=>clearTimeout(e)}},[u,b]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{position:"absolute",top:20,left:50,zIndex:1e3,width:360,boxSizing:"border-box",display:"flex",alignItems:"center",fontFamily:"Inter, Arial, sans-serif"},className:"jsx-445a961fcf664118 search-container",children:(0,r.jsx)("div",{style:{flex:1},className:"jsx-445a961fcf664118",children:(0,r.jsxs)("div",{style:{width:"100%",background:j?"#181c24":"#ffffff",borderRadius:14,boxShadow:j?"0 2px 12px rgba(0,0,0,0.13)":"0 2px 12px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",padding:"0 10px",minHeight:48,border:j?"1.5px solid #23293a":"1.5px solid #e0e0e0",boxSizing:"border-box"},className:"jsx-445a961fcf664118 searchbox",children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(n)},style:{display:"flex",alignItems:"center",width:"100%"},className:"jsx-445a961fcf664118 search-form",children:[(0,r.jsx)("label",{htmlFor:"search-input",style:{display:"none"},className:"jsx-445a961fcf664118",children:"Search Google Maps"}),(0,r.jsx)("input",{id:"search-input",ref:C,type:"text",placeholder:"Search...",autoComplete:"off",value:n,onChange:e=>i(e.target.value),onFocus:()=>x(!0),onBlur:()=>setTimeout(()=>x(!1),200),style:{border:"none",outline:"none",fontSize:17,width:"100%",background:"transparent",color:j?"#fff":"#000",padding:"12px 0",fontWeight:500,letterSpacing:.2},className:"jsx-445a961fcf664118"})]}),(0,r.jsx)("button",{"aria-label":j?"Switch to light mode":"Switch to dark mode",onClick:v,style:{background:"none",border:"none",color:"#00ff88",fontSize:20,width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10,marginLeft:8,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#23293a",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.background="none",e.currentTarget.style.transform="scale(1)"},className:"jsx-445a961fcf664118 dark-mode-btn",children:j?"☀️":"\uD83C\uDF19"})]})})}),(0,r.jsx)(H.N,{children:p>=11&&u.length>0&&(0,r.jsxs)(F.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeOut"},role:"region","aria-label":"".concat(u.length," projects in this area"),onMouseEnter:()=>{T.current&&clearTimeout(T.current),g(!0),y(!0)},onMouseLeave:()=>{g(!1),T.current=setTimeout(()=>{y(!1)},300)},style:{position:"fixed",top:20,left:426,zIndex:1e3,display:"flex",flexDirection:"row",alignItems:"center",overflowX:"auto",overflowY:"hidden",maxWidth:b?650:400,height:b?120:52,gap:b?16:8,padding:b?"16px 20px":"8px 12px",background:j?"linear-gradient(135deg, rgba(24, 28, 36, 0.95) 0%, rgba(35, 41, 58, 0.95) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 245, 245, 0.95) 100%)",borderRadius:b?20:14,border:j?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(0, 0, 0, 0.1)",boxShadow:b?j?"0 8px 32px rgba(0, 0, 0, 0.4), 0 4px 16px rgba(0, 0, 0, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.1), 0 4px 16px rgba(0, 0, 0, 0.05)":j?"0 4px 16px rgba(0, 0, 0, 0.3)":"0 4px 16px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",scrollbarWidth:"thin",scrollbarColor:j?"rgba(255, 255, 255, 0.3) transparent":"rgba(0, 0, 0, 0.3) transparent",opacity:m?1:.85,transition:"all 0.3s ease",pointerEvents:"auto"},children:[(0,r.jsx)(H.N,{children:w&&b&&(0,r.jsx)(F.P.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>{if(P.current){let e=Math.max(0,P.current.scrollLeft-200);I(P.current,e)}},"aria-label":"Scroll left",style:{position:"absolute",left:8,top:"40%",transform:"translateY(-50%)",zIndex:1002,width:32,height:32,background:"rgba(0, 255, 136, 0.9)",border:"none",borderRadius:"50%",color:"#000",fontSize:14,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.1,background:"rgba(0, 255, 136, 1)"},whileTap:{scale:.95},children:"‹"})}),(0,r.jsx)("div",{ref:P,onScroll:E,style:{display:"flex",flexDirection:"row",alignItems:"center",overflowX:"auto",overflowY:"hidden",scrollBehavior:"smooth",gap:b?16:8,padding:b?"16px 20px":"8px 12px",paddingLeft:w&&b?48:b?20:12,paddingRight:k&&b?48:b?20:12,width:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},className:"jsx-445a961fcf664118 hide-scrollbar",children:u.map((e,t)=>(0,r.jsxs)(F.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t,duration:.2},whileHover:{scale:1.05,y:-2,transition:{duration:.2}},whileTap:{scale:.95},onClick:()=>d&&d(e),"aria-label":"Select project: ".concat(e.Name),style:{display:"flex",flexDirection:b?"column":"row",alignItems:"center",justifyContent:"center",background:j?"#23293a":"#f5f5f5",border:j?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:b?12:8,padding:b?"12px 16px":"6px 8px",minWidth:b?140:80,maxWidth:b?180:120,height:b?88:36,cursor:"pointer",color:j?"#ffffff":"#000000",fontSize:b?14:11,fontWeight:600,lineHeight:1.2,outline:"none",flexShrink:0,transition:"all 0.2s ease",gap:b?8:6},onMouseEnter:e=>{e.currentTarget.style.background="#00ff88",e.currentTarget.style.color="#000000",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(0, 255, 136, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background=j?"#23293a":"#f5f5f5",e.currentTarget.style.color=j?"#ffffff":"#000000",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,r.jsx)("img",{src:e.ImageUrl||e.imageUrl||"https://placehold.co/32x32/23293a/ffffff?text=P",alt:"",role:"presentation",style:{width:b?40:24,height:b?40:24,borderRadius:b?8:4,objectFit:"cover",border:"1px solid rgba(255, 255, 255, 0.2)",flexShrink:0},onError:e=>{e.currentTarget.src="https://placehold.co/32x32/23293a/ffffff?text=P"},className:"jsx-445a961fcf664118"}),(0,r.jsx)("span",{style:{fontSize:b?13:11,fontWeight:600,lineHeight:1.2,color:"inherit",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:b?"100%":"60px",textAlign:b?"center":"left"},className:"jsx-445a961fcf664118",children:e.Name})]},e.Name+t))}),(0,r.jsx)(H.N,{children:k&&b&&(0,r.jsx)(F.P.button,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},onClick:()=>{if(P.current){let e=Math.min(P.current.scrollWidth-P.current.clientWidth,P.current.scrollLeft+200);I(P.current,e)}},"aria-label":"Scroll right",style:{position:"absolute",right:8,top:"40%",transform:"translateY(-50%)",zIndex:1002,width:32,height:32,background:"rgba(0, 255, 136, 0.9)",border:"none",borderRadius:"50%",color:"#000",fontSize:14,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.1,background:"rgba(0, 255, 136, 1)"},whileTap:{scale:.95},children:"›"})})]})}),h&&(0,r.jsxs)("div",{ref:A,style:{position:"absolute",top:80,left:50,width:360,boxSizing:"border-box",background:j?"#181c24":"#ffffff",borderRadius:16,boxShadow:j?"0 8px 32px rgba(0,0,0,0.22)":"0 8px 32px rgba(0,0,0,0.1)",padding:12,zIndex:1001,border:j?"1.5px solid #23293a":"1.5px solid #e0e0e0",fontFamily:"Inter, Arial, sans-serif",transition:"opacity 0.18s, transform 0.18s",opacity:h?1:0,transform:h?"translateY(0)":"translateY(10px)",pointerEvents:h?"auto":"none"},className:"jsx-445a961fcf664118 search-dropdown",children:[n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("strong",{style:{color:"#00ff88",fontWeight:600,fontSize:13,letterSpacing:1},className:"jsx-445a961fcf664118",children:"Results"}),(0,r.jsxs)("ul",{style:{maxHeight:240,overflowY:"auto",margin:0,padding:0,listStyle:"none"},className:"jsx-445a961fcf664118",children:[0===c.length&&(0,r.jsx)("li",{style:{padding:8,color:j?"#888":"#666",fontSize:13},className:"jsx-445a961fcf664118",children:"No results"}),c.map((e,t)=>(0,r.jsxs)("li",{style:{cursor:"pointer",padding:"7px 8px",borderRadius:8,display:"flex",alignItems:"center",gap:10,transition:"background 0.18s",marginBottom:2},onMouseDown:()=>{d&&d(e),setTimeout(()=>x(!1),100)},onMouseEnter:e=>e.currentTarget.style.background=j?"#23293a":"#f5f5f5",onMouseLeave:e=>e.currentTarget.style.background="transparent",className:"jsx-445a961fcf664118",children:[(0,r.jsx)("img",{src:e.ImageUrl||e.imageUrl||"https://placehold.co/32x32",alt:e.Name,style:{width:32,height:32,borderRadius:7,objectFit:"cover",flexShrink:0,border:"1px solid #23293a",background:"#23293a"},className:"jsx-445a961fcf664118"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},className:"jsx-445a961fcf664118",children:[(0,r.jsx)("span",{style:{fontWeight:500,color:j?"#fff":"#000",fontSize:15,lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-445a961fcf664118",children:e.Name}),(0,r.jsx)("span",{style:{fontSize:12,color:j?"#b0b0b0":"#666",lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:1},className:"jsx-445a961fcf664118",children:e.DescriptionShort})]})]},t))]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-445a961fcf664118",children:[(0,r.jsx)("strong",{style:{color:"#00ff88",fontWeight:600,fontSize:13,letterSpacing:1},className:"jsx-445a961fcf664118",children:"Recent Searches"}),(0,r.jsx)("ul",{style:{fontSize:13},className:"jsx-445a961fcf664118",children:s.map((e,t)=>(0,r.jsx)("li",{className:"jsx-445a961fcf664118",children:e},t))})]}),(0,r.jsxs)("div",{style:{marginTop:12,borderTop:j?"1px solid #23293a":"1px solid #e0e0e0",paddingTop:8},className:"jsx-445a961fcf664118",children:[(0,r.jsx)("strong",{style:{color:"#00ff88",fontWeight:600,fontSize:13,letterSpacing:1},className:"jsx-445a961fcf664118",children:"This Area"}),f?(0,r.jsxs)("div",{style:{marginTop:6,background:j?"#23293a":"#f5f5f5",borderRadius:10,padding:"10px 12px",color:j?"#fff":"#000",cursor:"pointer",fontSize:15,fontWeight:500,boxShadow:j?"0 2px 8px rgba(0,0,0,0.10)":"0 2px 8px rgba(0,0,0,0.05)",transition:"background 0.18s",display:"flex",alignItems:"center",gap:10},onMouseDown:()=>d&&d(f),onMouseEnter:e=>e.currentTarget.style.background="#00ff88",onMouseLeave:e=>e.currentTarget.style.background=j?"#23293a":"#f5f5f5",className:"jsx-445a961fcf664118",children:[(0,r.jsx)("img",{src:f.ImageUrl||f.imageUrl||"https://placehold.co/32x32",alt:f.Name,style:{width:32,height:32,borderRadius:7,objectFit:"cover",flexShrink:0,border:"1px solid #23293a",background:"#23293a"},className:"jsx-445a961fcf664118"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},className:"jsx-445a961fcf664118",children:[(0,r.jsx)("span",{style:{fontWeight:500,color:j?"#fff":"#000",fontSize:15,lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-445a961fcf664118",children:f.Name}),f.DescriptionShort&&(0,r.jsx)("div",{style:{fontSize:13,color:j?"#b0b0b0":"#666",fontWeight:400,marginTop:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},className:"jsx-445a961fcf664118",children:f.DescriptionShort})]})]}):(0,r.jsx)("div",{style:{color:j?"#b0b0b0":"#666",fontSize:13,marginTop:6},className:"jsx-445a961fcf664118",children:o})]})]}),(0,r.jsx)("div",{style:{marginTop:12,borderTop:j?"1px solid #23293a":"1px solid #e0e0e0",paddingTop:8},className:"jsx-445a961fcf664118",children:(0,r.jsx)("button",{onClick:t,style:{marginTop:8,width:"100%",background:j?"#23293a":"#f5f5f5",color:"#00ff88",border:"none",borderRadius:7,padding:"10px 0",fontWeight:600,fontSize:15,letterSpacing:1,cursor:"pointer",transition:"background 0.18s"},onMouseEnter:e=>e.currentTarget.style.background="#00ff88",onMouseLeave:e=>e.currentTarget.style.background=j?"#23293a":"#f5f5f5",className:"jsx-445a961fcf664118",children:"▼ Open Sidebar"})})]}),(0,r.jsx)(V,{id:"445a961fcf664118",children:".hide-scrollbar.jsx-445a961fcf664118::-webkit-scrollbar{display:none}.hide-scrollbar.jsx-445a961fcf664118{-ms-overflow-style:none;scrollbar-width:none}"})]})}let G=[32.2217,-110.9265],J=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color: #e74c3c; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[12,12],iconAnchor:[6,6],popupAnchor:[0,-5]}),K=(0,c.divIcon)({className:"custom-div-icon",html:'<div style="background-color:rgb(0, 255, 247); width: 16px; height: 16px; border-radius: 50%; border: 3px solid blue; box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);"></div>',iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-5]});function Q(e){let{open:t,onClose:o,searchTerm:a,setSearchTerm:l,filteredProjects:n,searchFilteredProjects:i,onSelectCategory:c,selectedCategory:d,markerRefs:f,categories:u}=e,p=(0,s.ko)();return(0,r.jsx)(P,{open:t,onClose:o,searchTerm:a,setSearchTerm:l,filteredProjects:n,searchFilteredProjects:i,onSelectCategory:c,selectedCategory:d,markerRefs:f,categories:u,onProjectClick:(e,t)=>{let o="".concat(e.Name,"-").concat(t),r=parseFloat(e.Latitude),a=parseFloat(e.Longitude);isNaN(r)||isNaN(a)?console.error("Invalid coordinates:",r,a):(null==f?void 0:f.current[o])?(p.flyTo([r,a],13,{animate:!0}),f.current[o].openPopup()):console.warn('Marker for key "'.concat(o,'" not found.'))}})}function $(e){let{filteredProjects:t,setAreaInfo:o,setAreaProject:r,setAreaProjects:l,setMapZoom:n}=e,i=(0,s.Po)({moveend:c,zoomend:c});function c(){let e=i.getZoom();if(e<12){o("Zoom in to see projects in this area"),r(null),l([]),n(e);return}let a=i.getBounds(),s=t.filter(e=>a.contains([e.Latitude,e.Longitude]));if(0===s.length)o("No projects in this area"),r(null),l([]),n(11);else{let t=s[0];o("".concat(t.Name).concat(t.DescriptionShort?": "+t.DescriptionShort:"")),r(t),l(s),n(e)}}return(0,a.useEffect)(()=>{c()},[t]),null}function ee(){let{projects:e,filteredProjects:t,filterProjects:o,categories:s}=function(){let[e,t]=(0,a.useState)([]),[o,r]=(0,a.useState)(""),[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/storymapdata_db_ready_v2.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let o=await e.json();t(o);let r=[...new Set(o.map(e=>e.ProjectCategory).filter(Boolean))];console.log("Found categories in data:",r);let a={ArtExhibition:"Art Exhibition",Research:"Research",CommunityEngagement:"Community Engagement",Performance:"Performance",Workshop:"Workshop",Conference:"Conference",Publication:"Publication",Other:"Other"},s=r.map(e=>({Value:e,Label:a[e]||e}));console.log("Processed categories:",s),l(s)}catch(e){console.error("Error fetching data:",e),i(e.message)}})()},[]);let c=(0,a.useMemo)(()=>o?e.filter(e=>e.ProjectCategory===o):e,[e,o]),d=(0,a.useCallback)(e=>{r(e)},[]),f=(0,a.useCallback)(()=>e.filter(e=>e.Artworks&&e.Artworks.length>0),[e]),u=(0,a.useCallback)(()=>e.filter(e=>e.Poems&&e.Poems.length>0),[e]),p=(0,a.useCallback)(()=>{let t=new Set;return e.forEach(e=>{e.Activities&&e.Activities.forEach(e=>{t.add(e)})}),Array.from(t)},[e]);return{projects:e,filteredProjects:c,categories:s,error:n,filterProjects:d,getProjectsWithArtworks:f,getProjectsWithPoems:u,getUniqueActivities:p}}(),[c,d]=(0,a.useState)(""),[f,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),x=(0,a.useRef)({});(0,a.useRef)(null);let[m,g]=(0,a.useState)(null),{isDarkMode:b}=(0,L.D)(),[y,j]=(0,a.useState)(!1),[v,w]=(0,a.useState)(""),[N,k]=(0,a.useState)([]),[S,C]=(0,a.useState)(""),[A,P]=(0,a.useState)(null),[T,I]=(0,a.useState)([]),[E,D]=(0,a.useState)(11),R=t.filter(e=>{var t,o,r;if(!v)return!0;let a=v.toLowerCase();return(null===(t=e.Name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(o=e.DescriptionShort)||void 0===o?void 0:o.toLowerCase().includes(a))||(null===(r=e.Description)||void 0===r?void 0:r.toLowerCase().includes(a))});(0,a.useRef)(window.location.hash);let M=(0,a.useCallback)(e=>{u(e),h(!0),window.location.hash="project=".concat(encodeURIComponent(e.Name),"&lat=").concat(e.Latitude,"&lng=").concat(e.Longitude)},[]),z=(0,a.useCallback)(()=>{h(!1),u(null);let e=new URLSearchParams(window.location.hash.slice(1));e.has("project")&&(e.delete("project"),e.delete("lat"),e.delete("lng"),window.location.hash=e.toString())},[]);(0,a.useCallback)(e=>{let t=new URLSearchParams(window.location.hash.slice(1));e?t.set("category",encodeURIComponent(e)):t.delete("category");let o=t.toString();window.location.hash.slice(1)!==o&&(window.location.hash=o)},[]);let U=(0,a.useCallback)((e,t,o)=>{Object.values(x.current).forEach(e=>{e&&e.setIcon(J)}),e.setIcon(K),g(e),new URLSearchParams(window.location.hash.slice(1)).get("selected")!==t.Name&&(window.location.hash="selected=".concat(encodeURIComponent(t.Name)));let r=e._map.getZoom();e._map.flyTo([t.Latitude,t.Longitude],r,{animate:!0})},[x]);return(0,a.useEffect)(()=>{let e=()=>{d(e=>{let t=new URLSearchParams(window.location.hash.slice(1)).get("category")||"";return t!==e?t:e})};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]),(0,a.useEffect)(()=>{o(c)},[c,o]),(0,a.useEffect)(()=>{if(!t)return;let e=()=>{let e=new URLSearchParams(window.location.hash.slice(1)),o=e.get("project"),r=e.get("selected");if(o){let e=decodeURIComponent(o),r=t.find(t=>t.Name===e);r&&(!f||f.Name!==r.Name)&&(u(r),h(!0))}else p&&(h(!1),u(null));if(r){let e=decodeURIComponent(r),o=t.find(t=>t.Name===e);if(o){let e=t.indexOf(o),r="".concat(o.Name,"-").concat(e),a=x.current[r];a&&m!==a&&(Object.values(x.current).forEach(e=>{e&&e.setIcon(J)}),a.setIcon(K),g(a))}}else m&&(m.setIcon(J),g(null))};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[t,p,f,m,x]),(0,a.useEffect)(()=>{document.querySelectorAll(".leaflet-popup").forEach(e=>{b?(e.classList.remove("light-mode-popup"),e.classList.add("dark-mode-popup")):(e.classList.remove("dark-mode-popup"),e.classList.add("light-mode-popup"))})},[b]),(0,a.useEffect)(()=>{t&&t.forEach((e,t)=>{let o="".concat(e.Name,"-").concat(t),r=x.current[o];if(r){let o=document.createElement("div");o.className="responsive-popup-content",o.innerHTML='\n            <img \n              src="'.concat(e.ImageUrl||"https://via.placeholder.com/150",'" \n              alt="').concat(e.Name,'" \n              class="popup-image" \n            />\n            <strong class="popup-title">').concat(e.Name,'</strong>\n            <p class="popup-description">').concat(e.DescriptionShort||e.Description||"",'</p>\n            <button id="more-details-').concat(t,'" class="popup-button">\n              More Details\n            </button>\n        ');let a=q.L({hasTip:!1,autoPan:!0,className:b?"dark-mode-popup":"light-mode-popup"}).setContent(o);r.bindPopup(a),r.on("click",()=>{U(r,e,t)}),r.on("popupopen",()=>{U(r,e,t)}),r.on("popupclose",()=>{let e=new URLSearchParams(window.location.hash.slice(1));e.has("selected")&&(e.delete("selected"),window.location.hash=e.toString()),r.setIcon(J),g(null)});let s=o.querySelector("#more-details-".concat(t));s&&s.addEventListener("click",()=>{M(e)})}})},[t,b,M,U]),(0,r.jsxs)("div",{style:{position:"relative",height:"100vh",width:"100%"},children:[(0,r.jsx)(X,{searchTerm:v,setSearchTerm:w,onMenuClick:()=>j(!0),areaInfo:S,areaProject:A,areaProjects:T,mapZoom:E,searchHistory:N,onSearch:e=>{w(e),e&&!N.includes(e)&&k([e,...N.slice(0,9)])},filteredProjects:R,onProjectSelect:e=>{let o=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),r="".concat(e.Name,"-").concat(o);!isNaN(e.Latitude)&&!isNaN(e.Longitude)&&(null==x?void 0:x.current[r])&&(x.current[r]._map.flyTo([e.Latitude,e.Longitude],13,{animate:!0}),x.current[r].openPopup()),j(!1)}}),(0,r.jsxs)(l.W,{center:G,zoom:11,style:{height:"100vh",width:"100%"},children:[(0,r.jsx)($,{filteredProjects:t,setAreaInfo:C,setAreaProject:P,setAreaProjects:I,setMapZoom:D}),(0,r.jsx)(n.e,{url:b?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',minZoom:0,maxZoom:20}),null==t?void 0:t.map((e,t)=>{let o="".concat(e.Name,"-").concat(t);return(0,r.jsx)(i.p,{position:[e.Latitude,e.Longitude],icon:J,ref:e=>{e&&(x.current[o]=e)}},o)}),y&&(0,r.jsx)(Q,{open:y,onClose:()=>j(!1),searchTerm:v,setSearchTerm:w,filteredProjects:t,searchFilteredProjects:R,onSelectCategory:d,selectedCategory:c,markerRefs:x,categories:s})]}),(0,r.jsx)("div",{className:"map-color-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%",background:"rgba(192, 128, 248, 0.1)",pointerEvents:"none",zIndex:400}}),f&&(0,r.jsx)(Z,{project:f,onClose:z})]})}},9388:(e,t,o)=>{"use strict";o.d(t,{D:()=>n,DarkModeProvider:()=>l});var r=o(5155),a=o(2115);let s=(0,a.createContext)();function l(e){let{children:t}=e,[o,l]=(0,a.useState)(!0);return(0,r.jsx)(s.Provider,{value:{isDarkMode:o,toggleDarkMode:()=>l(e=>!e)},children:t})}function n(){return(0,a.useContext)(s)}}}]);