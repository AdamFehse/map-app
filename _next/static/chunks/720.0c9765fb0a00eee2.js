(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{2427:()=>{},6720:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>et});var a=r(5155),n=r(2115),o=r(833),s=r(5402),i=r(3710),l=r(8741);r(8413);var c=r(6756),d=r(9579),u=r(4918),h=r(1983),m=r(6331),p=r(6017),x=r(2091),g=r(5436),j=r(9561),f=r(894),v=r(2241),A=r(152),b=r(1441),y=r(391),k=r(1118),N=r(4286),w=r(4244),C=r(1837),D=r(8205),P=r(2678),L=r(507),S=r(6765),I=r(1888);function E(e){let{categories:t=[],onSelectCategory:r,selectedCategory:o}=e,[s,i]=(0,n.useState)(!1);console.log("ProjectDropdown received categories:",t),console.log("ProjectDropdown selectedCategory:",o);let l=e=>{console.log("ProjectDropdown handleClose called with category:",e),i(!1),r(e)};return(0,a.jsx)(g.A,{sx:{minWidth:120},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(L.A,{id:"category-select-label",children:"Category"}),(0,a.jsxs)(S.A,{labelId:"category-select-label",id:"category-select",open:s,onClose:()=>i(!1),onOpen:()=>i(!0),value:o||"",label:"Category",children:[(0,a.jsx)(I.A,{onClick:()=>l(""),children:"All Projects"},"all"),t.map((e,t)=>(0,a.jsx)(I.A,{onClick:()=>l(e.Value||e.value),children:e.Label||e.label||e.Value||e.value},e.Value||e.value||"category-".concat(t)))]})]})})}var F=r(9388);function W(e){let{filteredProjects:t,onSelectCategory:r,selectedCategory:o,markerRefs:s,categories:i=[]}=e,[l,P]=(0,n.useState)(!1),[L,S]=(0,n.useState)(""),I=()=>P(!l),[W,O]=(0,n.useState)(!0),T=(0,c.ko)(),{isDarkMode:U,toggleDarkMode:M}=(0,F.D)();(0,n.useEffect)(()=>{document.body.classList.toggle("dark-mode",U)},[U]),console.log("Filtered Projects:",t),console.log("Selected Category:",o);let z=null==t?void 0:t.filter(e=>{var t,r,a;let n=L.toLowerCase();return(null===(t=e.Name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.DescriptionShort)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(a=e.Description)||void 0===a?void 0:a.toLowerCase().includes(n))}),R=e=>{let r=parseFloat(e.Latitude),a=parseFloat(e.Longitude);console.log("Navigating to:",r,a);let n=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),o="".concat(e.Name,"-").concat(n);isNaN(r)||isNaN(a)?console.error("Invalid coordinates:",r,a):(null==s?void 0:s.current[o])?(T.flyTo([r,a],13,{animate:!0}),s.current[o].openPopup()):console.warn('Marker for key "'.concat(o,'" not found.'))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:"\n  @keyframes intense-pulse-glow {\n    0% {\n      filter: drop-shadow(0 0 8px rgb(255, 0, 0)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4));\n      transform: scale(1);\n    }\n    25% {\n      filter: drop-shadow(0 0 12px rgb(0, 255, 17)) drop-shadow(0 0 30px rgba(255, 255, 0, 0.9)) drop-shadow(0 0 50px rgba(255, 255, 0, 0.5));\n      transform: scale(1.05);\n    }\n    50% {\n      filter: drop-shadow(0 0 15px rgb(0, 255, 255)) drop-shadow(0 0 40px rgba(0, 255, 255, 1)) drop-shadow(0 0 65px rgba(0, 255, 255, 0.6));\n      transform: scale(1.08);\n    }\n    75% {\n      filter: drop-shadow(0 0 12px rgb(255, 0, 255)) drop-shadow(0 0 30px rgba(255, 0, 255, 0.9)) drop-shadow(0 0 50px rgba(255, 0, 255, 0.5));\n      transform: scale(1.05);\n    }\n    100% {\n      filter: drop-shadow(0 0 8px rgb(0, 55, 255)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4));\n      transform: scale(1);\n    }\n  }\n  \n  @keyframes outer-pulse {\n    0% {\n      transform: scale(1);\n      opacity: 0.7;\n    }\n    50% {\n      transform: scale(1.2);\n      opacity: 0.3;\n    }\n    100% {\n      transform: scale(1);\n      opacity: 0.7;\n    }\n  }\n  \n  @keyframes hover-pulse {\n    0% {\n      transform: scale(1);\n      opacity: 0.6;\n    }\n    50% {\n      transform: scale(1.1);\n      opacity: 0.8;\n    }\n    100% {\n      transform: scale(1);\n      opacity: 0.6;\n    }\n  }\n"}),(0,a.jsx)(d.Ay,{variant:"permanent",anchor:W?"left":"right",sx:{width:60,flexShrink:0,"& .MuiDrawer-paper":{width:60,boxSizing:"border-box",backgroundColor:U?"#1a1a1a":"#ffffff",color:U?"#ffffff":"#000000",transition:"background-color 0.3s, color 0.3s"}},children:(0,a.jsxs)(u.A,{children:[(0,a.jsx)(h.Ay,{disablePadding:!0,children:(0,a.jsx)(m.A,{title:"Menu",placement:"right",children:(0,a.jsx)(p.A,{sx:{justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",top:"-10px",left:"-10px",right:"-10px",bottom:"-10px",background:l?"none":"radial-gradient(circle, rgba(255,0,0,0.3) 0%, rgba(255,255,0,0.2) 30%, rgba(0,255,255,0.1) 60%, transparent 100%)",borderRadius:"50%",animation:l?"none":"outer-pulse 4s ease-in-out infinite",zIndex:-1},"&:hover":{"& .MuiSvgIcon-root":{filter:"drop-shadow(0 0 20px rgba(0, 255, 26, 1)) drop-shadow(0 0 35px rgba(0, 255, 26, 0.9)) drop-shadow(0 0 50px rgba(0, 255, 26, 0.6))",transition:"all 0.3s ease",transform:"scale(1.2)"},"&::before":{background:"radial-gradient(circle, rgba(0,255,26,0.4) 0%, rgba(0,255,26,0.3) 30%, rgba(0,255,26,0.1) 60%, transparent 100%)",animation:"hover-pulse 4s ease-in-out infinite"}},"& .MuiSvgIcon-root":{filter:l?"drop-shadow(0 0 5px rgba(255,255,255,0.8))":"drop-shadow(0 0 8px rgb(255, 0, 0)) drop-shadow(0 0 20px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 0, 0, 0.4))",transition:"all 4.3s ease",animation:l?"none":"intense-pulse-glow 4.5s ease-in-out infinite",transformOrigin:"center"}},onClick:I,children:(0,a.jsx)(x.A,{sx:{minWidth:"auto"},children:(0,a.jsx)(k.A,{})})})})}),(0,a.jsx)(h.Ay,{disablePadding:!0,children:(0,a.jsx)(m.A,{title:"Toggle Dark Mode",placement:"right",children:(0,a.jsx)(p.A,{sx:{justifyContent:"center"},onClick:M,children:(0,a.jsx)(x.A,{sx:{minWidth:"auto"},children:(0,a.jsx)(N.A,{})})})})}),(0,a.jsx)(h.Ay,{disablePadding:!0,children:(0,a.jsx)(m.A,{title:"Toggle Sidebar Position",placement:"right",children:(0,a.jsx)(p.A,{sx:{justifyContent:"center"},onClick:()=>O(!W),children:(0,a.jsx)(x.A,{sx:{minWidth:"auto"},children:(0,a.jsx)(w.A,{})})})})})]})}),(0,a.jsxs)(d.Ay,{anchor:W?"left":"right",open:l,onClose:I,variant:"temporary",PaperProps:{sx:{width:300,backgroundColor:U?"#1a1a1a":"#ffffff",color:U?"#ffffff":"#000000",transition:"background-color 0.3s, color 0.3s"}},children:[(0,a.jsxs)(g.A,{sx:{display:"flex",alignItems:"center",p:1},children:[(0,a.jsx)(j.A,{variant:"h6",children:"Projects"}),(0,a.jsx)(f.A,{onClick:I,children:(0,a.jsx)(C.A,{})})]}),(0,a.jsx)(v.A,{}),(0,a.jsx)(g.A,{sx:{p:2},children:(0,a.jsx)(A.A,{fullWidth:!0,variant:"outlined",placeholder:"Search projects...",value:L,onChange:e=>{S(e.target.value)},InputProps:{startAdornment:(0,a.jsx)(b.A,{position:"start",children:(0,a.jsx)(D.A,{})})}})}),(0,a.jsx)(g.A,{sx:{p:2},children:(0,a.jsx)(E,{onSelectCategory:r,selectedCategory:o,categories:i})}),(0,a.jsx)(u.A,{children:null==z?void 0:z.map(e=>{let r=t.findIndex(t=>t.Name===e.Name&&t.Latitude===e.Latitude&&t.Longitude===e.Longitude),n="".concat(e.Name,"-").concat(r,"-").concat(e.Latitude,"-").concat(e.Longitude);return(0,a.jsx)(h.Ay,{disablePadding:!0,children:(0,a.jsx)(p.A,{onClick:()=>R(e),children:(0,a.jsx)(y.A,{primary:e.Name,secondary:e.DescriptionShort})})},n)})})]})]})}var O=r(8562),T=r(2282),U=r(6228),M=r(8648),z=r(9987),R=r(1291),_=r(2277),B=r(6214),H=r(9241),V=r(9896),Y=r(7456),q=r(6167),G=r(415),J=r(1417),K=r(8749);r(2427);let Q=e=>{var t,r,o,s;let{open:i,onClose:l,project:c}=e,{isDarkMode:d}=(0,F.D)(),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[x,f]=(0,n.useState)(0),[v,A]=(0,n.useState)([]),[b,y]=(0,n.useState)(0),k=(0,n.useRef)(null);if((0,n.useEffect)(()=>{if(!c)return;let e=[];c.ImageUrl&&e.push({src:c.ImageUrl,title:c.Name,type:"project"}),c.Artworks&&c.Artworks.length>0&&c.Artworks.forEach((t,r)=>{t.ImageUrl&&e.push({src:t.ImageUrl,title:t.Title,type:"artwork",description:t.Description})}),A(e)},[c]),(0,n.useEffect)(()=>{let e=()=>{k.current&&h(k.current.scrollTop>50)},t=k.current;if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[]),(0,n.useEffect)(()=>{let e=e=>{m&&("Escape"===e.key&&w(),"ArrowRight"===e.key&&C(),"ArrowLeft"===e.key&&D())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[m]),(0,n.useEffect)(()=>{i&&y(0)},[i]),!c)return null;let N=e=>{f(e),p(!0)},w=()=>{p(!1)},C=()=>{f(e=>(e+1)%v.length)},D=()=>{f(e=>(e-1+v.length)%v.length)},P=[{label:"Overview",icon:V.A,content:"overview"},...c.HasArtwork&&(null===(t=c.Artworks)||void 0===t?void 0:t.length)>0?[{label:"Artworks",icon:Y.A,content:"artworks",count:c.Artworks.length}]:[],...c.HasPoems&&(null===(r=c.Poems)||void 0===r?void 0:r.length)>0?[{label:"Poems",icon:q.A,content:"poems",count:c.Poems.length}]:[],...(null===(o=c.Activities)||void 0===o?void 0:o.length)>0?[{label:"Activities",icon:G.A,content:"activities",count:c.Activities.length}]:[],...(null===(s=c.relatedUrls)||void 0===s?void 0:s.length)>0?[{label:"Links",icon:J.A,content:"links",count:c.relatedUrls.length}]:[]],L=()=>(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsxs)(H.A,{container:!0,spacing:3,children:[(c.DescriptionLong||c.DescriptionShort)&&(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"info-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCDD Description"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.DescriptionLong||c.DescriptionShort})]})}),c.Background&&(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"info-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFAF Background"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.Background})]})}),c.Education&&c.Education.length>0&&(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"info-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83C\uDF93 Education"}),(0,a.jsx)("div",{className:"education-list",children:c.Education.map((e,t)=>(0,a.jsx)(j.A,{variant:"body1",className:"education-item",children:e},t))})]})}),(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(H.A,{container:!0,spacing:2,children:[c.Affiliation&&(0,a.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,a.jsxs)(O.A,{className:"info-card compact",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFE2 Affiliation"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.Affiliation})]})}),c.College&&(0,a.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,a.jsxs)(O.A,{className:"info-card compact",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFDB️ College"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.College})]})}),c.Department&&(0,a.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,a.jsxs)(O.A,{className:"info-card compact",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCDA Department"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.Department})]})}),c.Year&&(0,a.jsx)(H.A,{xs:12,sm:6,md:3,children:(0,a.jsxs)(O.A,{className:"info-card compact",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCC5 Year"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.Year})]})})]})}),c.Location&&(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"info-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83D\uDCCD Location"}),(0,a.jsx)(j.A,{variant:"body1",className:"card-content",children:c.Location})]})}),c.Outcome&&c.Outcome.Type&&(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"outcome-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"card-title",children:"\uD83C\uDFAF Outcome"}),(0,a.jsx)(j.A,{variant:"h6",className:"outcome-title",children:c.Outcome.Title}),(0,a.jsx)(j.A,{variant:"body1",className:"outcome-summary",children:c.Outcome.Summary}),c.Outcome.Link&&(0,a.jsx)(T.A,{variant:"contained",color:"primary",href:c.Outcome.Link,target:"_blank",rel:"noopener noreferrer",className:"outcome-button",children:"View Outcome"})]})})]})}),S=()=>{var e;return(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsx)("div",{className:"artwork-gallery",children:null===(e=c.Artworks)||void 0===e?void 0:e.map((e,t)=>(0,a.jsxs)(O.A,{className:"artwork-card",onClick:()=>{let r=v.findIndex(t=>t.src===e.ImageUrl);console.log("card clicked",e.ImageUrl,r,v),-1===r&&(r=t+(c.ImageUrl?1:0)),N(r)},children:[e.ImageUrl&&(0,a.jsxs)("div",{className:"artwork-image-container",children:[(0,a.jsx)("img",{src:e.ImageUrl,alt:e.Title,className:"artwork-image"}),(0,a.jsx)("div",{className:"artwork-image-overlay",children:(0,a.jsx)(K.A,{})})]}),(0,a.jsxs)("div",{className:"artwork-content",children:[(0,a.jsx)(j.A,{variant:"h6",className:"artwork-title",children:e.Title}),(0,a.jsx)(j.A,{variant:"body2",className:"artwork-description",children:e.Description})]})]},t))})})},I=()=>{var e;return(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsx)(H.A,{container:!0,spacing:3,children:null===(e=c.Poems)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"poem-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"poem-title",children:e.Title}),(0,a.jsx)(j.A,{variant:"body1",className:"poem-content",children:e.Content}),e.Author&&(0,a.jsxs)(j.A,{variant:"subtitle2",className:"poem-author",children:["- ",e.Author]})]})},t))})})},E=()=>{var e;return(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsx)(H.A,{container:!0,spacing:3,children:null===(e=c.Activities)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)(H.A,{xs:12,children:(0,a.jsxs)(O.A,{className:"activity-card",children:[(0,a.jsx)(j.A,{variant:"h6",className:"activity-title",children:e.Title}),(0,a.jsx)(j.A,{variant:"body1",className:"activity-description",children:e.Description}),e.Date&&(0,a.jsxs)(j.A,{variant:"caption",className:"activity-date",children:["\uD83D\uDCC5 ",e.Date]}),e.Link&&(0,a.jsx)(T.A,{variant:"text",color:"primary",href:e.Link,target:"_blank",rel:"noopener noreferrer",className:"activity-link",children:"Learn More"})]})},t))})})},W=()=>{var e;return(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsx)(H.A,{container:!0,spacing:2,children:null===(e=c.relatedUrls)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)(H.A,{xs:12,sm:6,children:(0,a.jsx)(T.A,{href:e.url,target:"_blank",rel:"noopener noreferrer",variant:"outlined",fullWidth:!0,className:"related-link-button",startIcon:(0,a.jsx)(J.A,{}),children:e.title})},t))})})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(U.A,{open:i,onClose:l,maxWidth:"lg",fullWidth:!0,className:"project-modal ".concat(d?"dark-mode":""),slotProps:{backdrop:{sx:{backgroundColor:d?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(15px) saturate(1.5)",WebkitBackdropFilter:"blur(15px) saturate(1.5)"}}},children:[(0,a.jsxs)(g.A,{className:"modal-header-visual ".concat(u?"collapsed":""),children:[c.ImageUrl&&(0,a.jsx)("img",{src:c.ImageUrl,alt:c.Name,className:"project-image-header"}),(0,a.jsxs)(g.A,{className:"modal-title-overlay",children:[(0,a.jsx)(j.A,{variant:"h4",component:"h2",className:"modal-title-h2",children:c.Name}),c.FacultyFellow&&(0,a.jsxs)(j.A,{variant:"subtitle1",className:"faculty-fellow",children:["By ",c.FacultyFellow]})]})]}),(0,a.jsx)(g.A,{className:"modal-tabs-container",children:(0,a.jsx)(M.A,{value:b,onChange:(e,t)=>{y(t)},variant:"scrollable",scrollButtons:"auto",className:"modal-tabs",children:P.map((e,t)=>{let r=e.icon;return(0,a.jsx)(z.A,{icon:(0,a.jsx)(r,{}),label:e.count?(0,a.jsx)(R.A,{badgeContent:e.count,color:"primary",children:e.label}):e.label,className:"modal-tab"},t)})})}),(0,a.jsx)(_.A,{className:"modal-content",ref:k,children:(()=>{let e=P[b];if(!e)return null;switch(e.content){case"overview":default:return L();case"artworks":return S();case"poems":return I();case"activities":return E();case"links":return W()}})()}),(0,a.jsx)(B.A,{className:"modal-actions",children:(0,a.jsx)(T.A,{onClick:l,variant:"contained",className:"close-button",children:"Close"})})]}),m&&v.length>0&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:w,children:(0,a.jsxs)("div",{style:{position:"relative",zIndex:2,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("img",{src:v[x].src,alt:v[x].title,style:{maxWidth:"90vw",maxHeight:"70vh",borderRadius:8,background:"#fff",marginBottom:12}}),v[x].description&&(0,a.jsx)("div",{style:{color:"#e5e7eb",marginTop:4,fontSize:14,fontWeight:400,maxWidth:"60vw",marginLeft:"auto",marginRight:"auto",whiteSpace:"pre-line",opacity:.85,textAlign:"center"},children:v[x].description}),(0,a.jsx)("button",{style:{position:"absolute",top:10,right:10,zIndex:3},onClick:w,children:"Close"})]})})]})};var X=r(2127);let Z=[32.2217,-110.9265],$=(0,l.divIcon)({className:"custom-div-icon",html:'<div style="background-color: #e74c3c; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',iconSize:[12,12],iconAnchor:[6,6],popupAnchor:[0,-5]}),ee=(0,l.divIcon)({className:"custom-div-icon",html:'<div style="background-color:rgb(0, 255, 247); width: 16px; height: 16px; border-radius: 50%; border: 3px solid blue; box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);"></div>',iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-5]});function et(){let{projects:e,filteredProjects:t,filterProjects:r,categories:l}=function(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[o,s]=(0,n.useState)([]),[i,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();t(r),a(r);let n=[...new Set(r.map(e=>e.ProjectCategory).filter(Boolean))];console.log("Found categories in data:",n);let o={ArtExhibition:"Art Exhibition",Research:"Research",CommunityEngagement:"Community Engagement",Performance:"Performance",Workshop:"Workshop",Conference:"Conference",Publication:"Publication",Other:"Other"},i=n.map(e=>({Value:e,Label:o[e]||e}));console.log("Processed categories:",i),s(i)}catch(e){console.error("Error fetching data:",e),l(e.message)}})()},[]),{projects:e,filteredProjects:r,categories:o,error:i,filterProjects:t=>{if(console.log("Filtering by category:",t),!t){a(e);return}let r=e.filter(e=>{let r=e.ProjectCategory===t;return console.log("Project ".concat(e.Name,": ProjectCategory=").concat(e.ProjectCategory,", matches=").concat(r)),r});console.log("Filtered ".concat(r.length," projects out of ").concat(e.length," total")),a(r)},getProjectsWithArtworks:()=>e.filter(e=>e.Artworks&&e.Artworks.length>0),getProjectsWithPoems:()=>e.filter(e=>e.Poems&&e.Poems.length>0),getUniqueActivities:()=>{let t=new Set;return e.forEach(e=>{e.Activities&&e.Activities.forEach(e=>{t.add(e)})}),Array.from(t)}}}(),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),x=(0,n.useRef)({});(0,n.useRef)(null);let[g,j]=(0,n.useState)(null),{isDarkMode:f}=(0,F.D)(),v=e=>{h(e),p(!0)};return(0,n.useEffect)(()=>{t&&t.forEach((e,t)=>{let r="".concat(e.Name,"-").concat(t),a=x.current[r];if(a){let r=document.createElement("div");r.className="responsive-popup-content",r.innerHTML='\n            <img \n              src="'.concat(e.ImageUrl||"https://via.placeholder.com/150",'" \n              alt="').concat(e.Name,'" \n              class="popup-image" \n            />\n            <strong class="popup-title">').concat(e.Name,'</strong>\n            <p class="popup-description">').concat(e.DescriptionShort||e.Description||"",'</p>\n            <button id="more-details-').concat(t,'" class="popup-button">\n              More Details\n            </button>\n        ');let n=X.L({hasTip:!1,autoPan:!0,className:f?"dark-mode-popup":"light-mode-popup"}).setContent(r);a.bindPopup(n),a.on("click",()=>{Object.values(x.current).forEach(e=>{e&&e.setIcon($)}),a.setIcon(ee),j(a)}),a.on("popupopen",()=>{Object.values(x.current).forEach(e=>{e&&e.setIcon($)}),a.setIcon(ee),j(a)}),a.on("popupclose",()=>{a.setIcon($),j(null)});let o=r.querySelector("#more-details-".concat(t));o&&o.addEventListener("click",()=>{v(e)})}})},[t,f]),(0,a.jsxs)("div",{className:"map-container",children:[(0,a.jsxs)(o.W,{center:Z,zoom:11,style:{height:"100vh",width:"100%"},children:[(0,a.jsx)(s.e,{url:f?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),null==t?void 0:t.map((e,t)=>{let r="".concat(e.Name,"-").concat(t);return(0,a.jsx)(i.p,{position:[e.Latitude,e.Longitude],icon:$,ref:e=>{e&&(x.current[r]=e)}},r)}),(0,a.jsx)(W,{filteredProjects:t,onSelectCategory:e=>{console.log("Map component received category selection:",e),d(e),r(e)},selectedCategory:c,markerRefs:x,categories:l})]}),u&&(0,a.jsx)(Q,{project:u,open:m,onClose:()=>{p(!1),h(null)}})]})}},9388:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,DarkModeProvider:()=>s});var a=r(5155),n=r(2115);let o=(0,n.createContext)();function s(e){let{children:t}=e,[r,s]=(0,n.useState)(!1);return(0,a.jsx)(o.Provider,{value:{isDarkMode:r,toggleDarkMode:()=>s(e=>!e)},children:t})}function i(){return(0,n.useContext)(o)}}}]);