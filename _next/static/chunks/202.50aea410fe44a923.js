(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{5106:()=>{},8280:()=>{},5494:()=>{},4999:()=>{},9235:()=>{},3353:()=>{},9202:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var o=r(5155),n=r(2115),i=r(833),a=r(5402),l=r(3710),s=r(2282),c=r(255),d=r(1888);function p(e){let{onSelectCategory:t}=e,[r,i]=(0,n.useState)(null),a=!!r,l=e=>{i(null),null!==e&&t(e)};return(0,o.jsxs)("div",{children:[(0,o.jsx)(s.A,{variant:"outlined",onClick:e=>{i(e.currentTarget)},"aria-controls":a?"category-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,children:"Select Category"}),(0,o.jsxs)(c.A,{id:"category-menu",anchorEl:r,open:a,onClose:()=>l(null),children:[(0,o.jsx)(d.A,{onClick:()=>l(""),children:"All Projects"}),(0,o.jsx)(d.A,{onClick:()=>l("Art-Based Projects"),children:"Art-Based Projects"}),(0,o.jsx)(d.A,{onClick:()=>l("Research Projects"),children:"Research Projects"}),(0,o.jsx)(d.A,{onClick:()=>l("Education and Community Outreach"),children:"Education and Community Outreach"})]})]})}r(3353),r(8280);var m=r(2127);r(1744),r(4999),r(9235);var u=r(4736),h=r(6210);r(5685),r(5494);var x=r(9030),j=r(8222),g=r(5330),A=r(1644);function y(e){let{project:t,setSelectedContent:r,isDarkMode:n,expandedAccordion:i,setExpandedAccordion:a}=e;if(!t)return null;let l=[];t.HasArtwork&&Array.isArray(t.Artworks)&&l.push({type:"artwork",title:"Artwork Library",items:t.Artworks.map(e=>({title:e.Title,description:e.Description,imageUrl:e.ImageUrl,activity:e.ActivityTitle}))}),t.HasPoems&&Array.isArray(t.Poems)&&l.push({type:"poem",title:"Poems",items:t.Poems.map(e=>({poemaTitle:e.ContentSpanish,poemTitle:e.Content,activityTitle:e.ActivityTitle,description:e.Description,text:e.Content||e.ContentSpanish}))}),t.HasOutcomes&&t.Outcome&&l.push({type:"outcome",title:"Outcomes",items:[{title:t.Title,summary:t.Outcome.Summary,link:t.Outcome.Link}]});let s=e=>{a(t=>t===e?null:e)};return(0,o.jsx)(o.Fragment,{children:l.map((e,t)=>(0,o.jsxs)(x.A,{expanded:i===e.type,onChange:()=>s(e.type),style:{backgroundColor:n?"#333":"#fff",color:n?"#fff":"#000"},children:[(0,o.jsx)(j.A,{expandIcon:(0,o.jsx)(A.A,{style:{color:n?"#fff":"#000"}}),children:(0,o.jsx)(u.A,{variant:"h6",children:e.title})}),(0,o.jsx)(g.A,{style:{maxHeight:"60vh",overflowY:"auto"},children:e.items.map((t,i)=>(0,o.jsxs)("div",{style:{cursor:"pointer",marginBottom:"8px",backgroundColor:n?"#444":"#f9f9f9",padding:"8px",borderRadius:"4px",border:n?"1px solid #555":"1px solid #ddd"},onClick:()=>r({type:e.type,content:t}),children:[(0,o.jsx)(u.A,{variant:"subtitle1",style:{fontWeight:"bold",color:n?"#fff":"#000"},children:t.poemaTitle||t.poemTitle||t.title||"Untitled"}),"poem"===e.type&&(0,o.jsx)(u.A,{variant:"body2",style:{color:n?"#ccc":"#666"},children:t.activityTitle}),"outcome"===e.type&&(0,o.jsx)(u.A,{variant:"body2",style:{color:n?"#ccc":"#666"},children:t.summary})]},i))})]},t))})}let f=()=>((0,n.useEffect)(()=>(window.clearLikeCounts=()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("likes-")&&localStorage.removeItem(e)}),console.log("All like counts have been reset!")},()=>{delete window.clearLikeCounts}),[]),null);function v(e){let{projectId:t}=e,[r,i]=(0,n.useState)(0);(0,n.useEffect)(()=>{if(!t)return;let e=localStorage.getItem("likes-".concat(t)),r=e?parseInt(e,10):0;console.log("Loaded Like Count for ".concat(t,": ").concat(r)),i(r)},[t]);let a=e=>{localStorage.setItem("likes-".concat(t),e),console.log("Saving ".concat(e," for likes-").concat(t))};return(0,o.jsxs)("button",{onClick:()=>{let e=r+1;i(e),a(e)},style:{marginTop:"10px"},children:["\uD83D\uDC4D ",r," Likes"]})}function k(e){let{open:t,onClose:r,project:i,isDarkMode:a}=e,[l,c]=(0,n.useState)(null),[d,p]=(0,n.useState)(null);if((0,n.useEffect)(()=>{t&&i||(c(null),p(null))},[t,i]),!i)return null;let m=(e,t)=>{let r=i.Name||i.Project||"unknown",o=i.Latitude||i.Latitude||0,n=i.Longitude||i.Longitude||0,a="".concat(r,"-").concat(o,"-").concat(n);switch(e){case"artwork":return"".concat(a,"-artwork-").concat(t.title||"untitled");case"poem":return"".concat(a,"-poem-").concat(t.poemaTitle||t.poemTitle||"untitled");case"outcome":return"".concat(a,"-outcome-").concat(t.title||"untitled");default:return a}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{}),(0,o.jsx)(h.A,{open:t,onClose:r,"aria-labelledby":"project-modal-title","aria-describedby":"project-modal-description",style:{display:"flex",justifyContent:"center",alignItems:"center",overflowY:"auto"},children:(0,o.jsxs)("div",{className:"container-fluid project-details-overlay ".concat(a?"bg-dark text-white":"bg-light text-dark"),style:{maxHeight:"90vh",overflowY:"auto",borderRadius:"8px",outline:"none"},children:[(0,o.jsxs)("div",{className:"header d-flex justify-content-between align-items-center p-3 border-bottom",children:[(0,o.jsx)(u.A,{variant:"h4",component:"h1",children:i.Name||i.Project||"Untitled Project"}),(0,o.jsx)(s.A,{variant:"contained",color:"primary",onClick:r,size:"small",children:"Close"})]}),(0,o.jsxs)("div",{className:"row g-0",children:[(0,o.jsx)("div",{className:"col-md-4 col-12 left-panel border-end",children:(0,o.jsx)(y,{project:i,setSelectedContent:c,expandedAccordion:d,setExpandedAccordion:p,isDarkMode:a})}),(0,o.jsx)("div",{className:"col-md-8 col-12 right-panel p-3",children:(()=>{if(!l)return(0,o.jsxs)("div",{className:"project-overview",children:[(0,o.jsx)(u.A,{variant:"h5",component:"h2",gutterBottom:!0,children:"Project Overview"}),i.ImageUrl&&(0,o.jsx)("div",{className:"image-container",style:{marginBottom:"16px"},children:(0,o.jsx)("img",{src:i.ImageUrl,alt:i.Name||"Project",style:{maxWidth:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onError:e=>{e.target.style.display="none",console.warn("Failed to load project image:",i.ImageUrl)}})}),(0,o.jsxs)(u.A,{variant:"body1",paragraph:!0,children:[(0,o.jsx)("strong",{children:"Description:"})," ",i.Description||i.DescriptionShort||"No description available."]}),i.Location&&(0,o.jsxs)(u.A,{variant:"body2",paragraph:!0,children:[(0,o.jsx)("strong",{children:"Location:"})," ",i.Location]}),i.Category&&(0,o.jsxs)(u.A,{variant:"body2",paragraph:!0,children:[(0,o.jsx)("strong",{children:"Category:"})," ",i.Category]}),(0,o.jsx)(u.A,{variant:"body2",color:"textSecondary",style:{marginTop:"16px"},children:"Select an item from the left panel to view detailed artwork, poems, or outcomes."}),(0,o.jsx)(v,{projectId:m("project",{})})]});let{type:e,content:t}=l;switch(e){case"artwork":return(0,o.jsxs)("div",{className:"artwork-content",children:[(0,o.jsx)(u.A,{variant:"h5",component:"h2",gutterBottom:!0,children:t.title||"Untitled Artwork"}),(0,o.jsxs)(u.A,{variant:"subtitle1",gutterBottom:!0,children:[(0,o.jsx)("strong",{children:"Activity:"})," ",t.activity||"N/A"]}),(0,o.jsx)(u.A,{variant:"body2",paragraph:!0,children:t.description||"No description available."}),(0,o.jsx)(v,{projectId:m("artwork",t)}),t.imageUrl&&(0,o.jsx)("div",{className:"image-container",style:{marginTop:"16px"},children:(0,o.jsx)("img",{src:t.imageUrl,alt:t.title||"Artwork",style:{maxWidth:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onError:e=>{e.target.style.display="none",console.warn("Failed to load image:",t.imageUrl)}})})]});case"poem":return(0,o.jsxs)("div",{className:"poem-content",children:[(0,o.jsx)(u.A,{variant:"h5",component:"h2",gutterBottom:!0,children:t.poemaTitle||t.poemTitle||"Untitled Poem"}),(0,o.jsx)(u.A,{variant:"body2",paragraph:!0,children:t.description||"No description available."}),(0,o.jsx)(u.A,{variant:"body1",component:"div",style:{whiteSpace:"pre-wrap",fontStyle:"italic",marginBottom:"16px",padding:"16px",backgroundColor:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",borderRadius:"8px"},children:t.text||"No text available."}),(0,o.jsx)(v,{projectId:m("poem",t)})]});case"outcome":return(0,o.jsxs)("div",{className:"outcome-content",children:[(0,o.jsx)(u.A,{variant:"h5",component:"h2",gutterBottom:!0,children:t.title||"Untitled Outcome"}),(0,o.jsx)(u.A,{variant:"body2",paragraph:!0,children:t.summary||"No summary available."}),t.link&&(0,o.jsx)(s.A,{variant:"outlined",color:"primary",href:t.link,target:"_blank",rel:"noopener noreferrer",style:{marginBottom:"16px"},children:"View Outcome"}),(0,o.jsx)(v,{projectId:m("outcome",t)})]});default:return(0,o.jsxs)(u.A,{variant:"body1",color:"error",children:["Unknown content type: ",e]})}})()})]})]})})]})}r(9826);var b=r(6756),C=r(8998),w=r(9579),P=r(894),S=r(2241),N=r(4918),T=r(4754),I=r(9681),D=r(6017),U=r(2091),E=r(562),O=r(391),F=r(1118),W=r(1837),B=r(5933),M=r(7097),R=r(4286),H=r(556);r(5106);var _=r(4244),Y=r(6667),z=r(350);function Z(e){let{filteredProjects:t,onSelectCategory:r,selectedCategory:i,markerRefs:a,isDarkMode:l,toggleDarkMode:s}=e,c=(0,b.ko)(),[d,m]=(0,n.useState)(!1),h=()=>m(!d),[x,j]=(0,n.useState)(!0),g=()=>j(!x),A=()=>{c.setZoom(9)},y=(e,t)=>{let r=parseFloat(e.Latitude),o=parseFloat(e.Longitude);console.log("Navigating to:",r,o);let n="".concat(e.Name,"-").concat(t);isNaN(r)||isNaN(o)?console.error("Invalid coordinates:",r,o):(null==a?void 0:a.current[n])?(c.flyTo([r,o],13,{animate:!0}),a.current[n].openPopup()):console.warn('Marker for key "'.concat(n,'" not found.'))};return(0,o.jsxs)(C.A,{sx:{display:"flex"},children:[(0,o.jsxs)(w.Ay,{variant:"permanent",anchor:x?"left":"right",PaperProps:{sx:{width:{xs:56,sm:62,md:72},overflowX:"hidden",backgroundColor:l?"#333":"#fff",color:l?"#fff":"#000"}},children:[(0,o.jsx)(C.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"64px"},children:(0,o.jsx)(P.A,{onClick:h,children:(0,o.jsx)(F.A,{})})}),(0,o.jsx)(S.A,{}),(0,o.jsxs)(N.A,{children:[(0,o.jsx)(T.Ay,{disablePadding:!0,children:(0,o.jsx)(I.A,{title:"Favorites",placement:"right",children:(0,o.jsx)(D.A,{sx:{justifyContent:"center"},children:(0,o.jsx)(U.A,{sx:{minWidth:"auto"},children:(0,o.jsx)(B.A,{})})})})}),(0,o.jsx)(T.Ay,{disablePadding:!0,children:(0,o.jsx)(I.A,{title:"Starred Projects",placement:"right",children:(0,o.jsx)(D.A,{sx:{justifyContent:"center"},children:(0,o.jsx)(U.A,{sx:{minWidth:"auto"},children:(0,o.jsx)(M.A,{})})})})}),(0,o.jsx)(T.Ay,{disablePadding:!0,children:(0,o.jsx)(I.A,{title:"Toggle Dark Mode",placement:"right",children:(0,o.jsx)(D.A,{sx:{justifyContent:"center"},onClick:s,children:(0,o.jsx)(U.A,{sx:{minWidth:"auto"},children:l?(0,o.jsx)(z.A,{sx:{color:"#FFD700"}}):(0,o.jsx)(Y.A,{sx:{color:"#FFD700"}})})})})}),(0,o.jsx)(T.Ay,{disablePadding:!0,children:(0,o.jsx)(I.A,{title:"Zoom Out",placement:"right",children:(0,o.jsx)(D.A,{sx:{justifyContent:"center"},onClick:A,children:(0,o.jsx)(U.A,{sx:{minWidth:"auto"},children:(0,o.jsx)(H.A,{})})})})}),(0,o.jsx)(T.Ay,{disablePadding:!0,children:(0,o.jsx)(I.A,{title:"Toggle Sidebar Position",placement:"right",children:(0,o.jsx)(D.A,{sx:{justifyContent:"center"},onClick:g,children:(0,o.jsx)(U.A,{sx:{minWidth:"auto"},children:(0,o.jsx)(_.A,{})})})})})]})]}),(0,o.jsxs)(w.Ay,{anchor:x?"left":"right",open:d,onClose:h,variant:"temporary",PaperProps:{sx:{width:{xs:"95vw",md:"35vw"},overflowY:"auto",backgroundColor:l?"#444":"#f9f9f9",color:l?"#fff":"#000"}},children:[(0,o.jsxs)(C.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:2},children:[(0,o.jsx)(u.A,{variant:"h6",children:"Projects"}),(0,o.jsx)(P.A,{onClick:h,children:(0,o.jsx)(W.A,{})})]}),(0,o.jsx)(S.A,{}),(0,o.jsxs)(C.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",gap:2,padding:2},children:[(0,o.jsx)(C.A,{sx:{gridColumn:"1 / span 1"},children:(0,o.jsx)(p,{onSelectCategory:r,selectedCategory:i})}),(0,o.jsxs)(C.A,{sx:{gridColumn:"2 / span 1",display:"flex",justifyContent:"flex-end",gap:2},children:[(0,o.jsx)(I.A,{title:"Toggle Dark Mode",placement:"top",children:(0,o.jsx)(P.A,{onClick:s,children:(0,o.jsx)(R.A,{})})}),(0,o.jsx)(I.A,{title:"Toggle Sidebar Position",placement:"top",children:(0,o.jsx)(P.A,{onClick:g,children:(0,o.jsx)(_.A,{})})}),(0,o.jsx)(I.A,{title:"Zoom Out",placement:"top",children:(0,o.jsx)(P.A,{onClick:A,children:(0,o.jsx)(H.A,{})})})]})]}),(0,o.jsx)(S.A,{}),(0,o.jsx)(N.A,{children:t.map((e,t)=>(0,o.jsx)(T.Ay,{disablePadding:!0,children:(0,o.jsxs)(D.A,{onClick:()=>y(e,t),children:[(0,o.jsx)(U.A,{children:(0,o.jsx)(E.A,{src:e.ProfileImageUrl||e.ImageUrl||"",alt:e.Name||"Placeholder"})}),(0,o.jsx)(O.A,{primary:e.Name})]})},t))})]})]})}function q(){let[e,t]=(0,n.useState)(!1),{projects:r,filteredProjects:s,filterProjects:c}=function(){let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:5136/api/projects"),r=await e.json();console.log("Loaded ".concat(r.length," projects")),console.log("Sample project structure:",r[0]),t(r),o(r)}catch(e){console.error("Error fetching project data:",e)}})()},[]),{projects:e,filteredProjects:r,filterProjects:t=>{e.length&&o("All"===t||""===t?e:e.filter(e=>e.ProjectCategory===t))},getProjectsWithArtworks:()=>r.filter(e=>e.Artworks&&e.Artworks.length>0),getProjectsWithPoems:()=>r.filter(e=>e.Poems&&e.Poems.length>0),getAllArtworks:()=>r.reduce((e,t)=>t.Artworks?[...e,...t.Artworks.map(e=>({...e,ProjectName:t.Name,ProjectLocation:t.Location}))]:e,[]),getAllPoems:()=>r.reduce((e,t)=>t.Poems?[...e,...t.Poems.map(e=>({...e,ProjectName:t.Name,ProjectLocation:t.Location}))]:e,[]),getAllActivities:()=>r.reduce((e,t)=>t.Activities?[...e,...t.Activities]:e,[]).filter((e,t,r)=>t===r.findIndex(t=>t.Title===e.Title))}}(),d=(0,n.useRef)({}),[p,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),[j,g]=(0,n.useState)(null),[A,y]=(0,n.useState)("All"),f=e=>{g(e),x(!0)};(0,n.useEffect)(()=>{s.forEach((e,t)=>{let r="".concat(e.Name,"-").concat(t),o=d.current[r];if(o){let r=document.createElement("div");r.innerHTML='\n              <div class="popup-content">\n                <img \n                  src="'.concat(e.ImageUrl||"https://via.placeholder.com/150",'" \n                  alt="').concat(e.Name,'" \n                  class="popup-image" \n                />\n                <strong>').concat(e.Name,'</strong>\n                <p class="popup-description">').concat(e.DescriptionShort||e.Description||"",'</p>\n                <button id="more-details-').concat(t,'" class="popup-button">\n                  More Details\n                </button>\n              </div>\n            ');let n=m.responsivePopup({hasTip:!0,autoPan:!0}).setContent(r);o.bindPopup(n);let i=r.querySelector("#more-details-".concat(t));i&&i.addEventListener("click",()=>{v(e)})}})},[s]);let v=e=>{f(e)};return(0,o.jsxs)(i.W,{center:[31.916004,-110.990274],zoom:10,style:{height:"100vh",width:"100%"},children:[(0,o.jsx)(a.e,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"\xa9 OpenStreetMap contributors"}),s.map((e,t)=>{let r=[parseFloat(e.Latitude),parseFloat(e.Longitude)],n="".concat(e.Name,"-").concat(t);return r[0]&&r[1]?(0,o.jsx)(l.p,{position:r,ref:e=>{e&&(d.current[n]=e)}},n):null}),(0,o.jsx)(Z,{filteredProjects:s||[],onSelectCategory:e=>{y(e),c(e)},selectedCategory:A,markerRefs:d,isDarkMode:p,toggleDarkMode:()=>{u(e=>{let t=!e;return document.body.classList.toggle("dark-mode",t),t})}}),(0,o.jsx)(k,{open:h,onClose:()=>{x(!1),g(null)},project:j,isDarkMode:p})]})}L.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})}}]);